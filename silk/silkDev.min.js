var generateCreateTableSQL=function(t,n,i){fkMatchDP=["Simple","Full","Partial"],fkOnDP=["No Action","Cascade","Set Null","Set Default","Restrict"],createSQL="create table "+t.tableName+" (\n";for(var a=0;a<n.length;a++){var r=n[a];let e=ifUndefined(r["sqlType"+i],"");isEmpty(e)&&(e="<red>*TYPE NO PROVIDED*</red>"),createSQL=(createSQL+="\t"+r.columnName+" ")+(e+" "),"1"==ifUndefined(r.pk,"")&&("Auto"==t.pkMode?("1"==i&&(createSQL+="primary key identity (1,1) "),"2"==i&&(createSQL+="primary key auto_increment "),"3"==i&&(createSQL+="primary key generated always as identity "),"4"==i&&(createSQL+="generated always as identity primary key")):createSQL+="primary key"),"1"==ifUndefined(r.notNull,"")&&(createSQL+="not null "),"1"==ifUndefined(r.unique,"")&&"2"!=i&&"4"!=i&&(createSQL+=" unique ");r=r["defaultValue"+i];""!=ifUndefined(r,"")&&(createSQL+="default "+r),createSQL+=",\n"}for(a=0;a<n.length;a++){var e=n[a];""!=ifUndefined(e.fkTable,"")&&(createSQL+="\tforeign key ("+e.columnName+") references "+e.fkTable+" ("+e.fkColumn+") ","0"!=ifUndefined(e.fkMatch,"0")&&(createSQL+="match "+fkMatchDP[e.fkMatch]+" "),"0"!=ifUndefined(e.fkOnUpdate,"0")&&(createSQL+="on delete "+fkOnDP[e.fkOnUpdate]+" "),"0"!=ifUndefined(e.fkOnDelete,"0")&&(createSQL+="on delete "+fkOnDP[e.fkOnDelete]+" "),createSQL+=",\n"),"1"==ifUndefined(e.unique,"")&&"2"==i&&(createSQL+="\tunique ("+e.columnName+"),\n")}createSQL=createSQL.substring(0,createSQL.length-2)+"\n",createSQL+=");\n\n";for(a=0;a<n.length;a++){e=n[a];"0"!=ifUndefined(e.indexColumn,"0")&&(createSQL+="create index "+t.tableName+"_"+e.columnName+" on "+t.tableName+"("+e.columnName+");\n")}return(createSQL=replaceAll(createSQL," ,",",")).trim()};generateXML=function(e){var t="<?xml version='1.0' encoding='UTF-8' ?>\n<!DOCTYPE ormObject>\n",n=(t+="<orm ",ormObject.table.developmentDatabaseID),n=(0!=n&&(t+='developmentDatabaseID="'+n+'" '),ifUndefined(ormObject.table.databaseController,"")),n=(""!=n&&(t+='databaseController="'+n+'" '),ormObject.queryType),n=("SQL"!=n&&(t+='queryType="'+n.toLowerCase()+'" '),t=t+">"+"\n\n\t<table ",ormObject.table.pkMode),n=("Auto"!=n&&(t+='pkMode="'+n.toLowerCase()+'" '),ormObject.table.tableName),n=(""!=n&&(t+='name="'+n+'" '),ifUndefined(ormObject.table.insertAuthorization,"")),n=(""!=n&&(t+='insertAuthorization="'+n+'" '),ifUndefined(ormObject.table.updateAuthorization,"")),n=(""!=n&&(t+='updateAuthorization="'+n+'" '),ifUndefined(ormObject.table.deleteAuthorization,""));""!=n&&(t+='deleteAuthorization="'+n+'" '),t+=">\n";for(var i=0;i<ormObject.column.length;i++){t+="\t\t<column ";var a=ormObject.column[i].columnName,r=(""!=ifUndefined(a,"")&&(t+='name="'+a+'" '),ormObject.column[i].type),o=(""!=ifUndefined(r,"")&&(t+='type="'+r+'" '),ormObject.column[i].pk),f=("0"!=ifUndefined(o,"0")&&(t+='pk="'+o+'" '),ormObject.column[i].secure),o=ormObject.column[i].pkNotSecure;"1"==ifUndefined(o,"0")?t+='secure="0" ':"0"!=ifUndefined(f,"0")&&(t+='secure="'+f+'" ');"R"==(l=ifUndefined(ormObject.column[i].role,"X"))&&(t+='root="1" '),"P"==l&&(t+='parent="1" '),"L"==l&&(t+='level="1" '),"O"==l&&(t+='order="1" ');var o=ormObject.column[i].translation,o=("0"!=ifUndefined(o,"0")&&(t+='translation="'+o+'" '),ormObject.column[i]["function"+databaseID]),o=(""!=ifUndefined(o,"")&&(t+='function="'+o+'" '),ormObject.column[i]["functionInsert"+databaseID]),o=(""!=ifUndefined(o,"")&&(t+='functionInsert="'+o+'" '),ormObject.column[i]["functionUpdate"+databaseID]),o=(""!=ifUndefined(o,"")&&(t+='functionUpdate="'+o+'" '),ormObject.column[i].nullValue),o=(""!=ifUndefined(o,"")&&(t+='nullValue="'+o+'" '),ormObject.column[i].validation),d=(""!=ifUndefined(o,"")&&(t+='validation="'+o+'" '),ormObject.column[i].authorization);""!=ifUndefined(d,"")&&(t+='authorization="'+d+'" '),t+="/>\n"}for(i=0;i<ormObject.fk.length;i++){t+="\t\t<column ";var l,a=ormObject.fk[i].columnName,r=(""!=ifUndefined(a,"")&&(t+='name="'+a+'" '),ormObject.fk[i].type),f=(""!=ifUndefined(r,"")&&(t+='type="'+r+'" '),ormObject.fk[i].secure);"0"!=ifUndefined(f,"0")&&(t+='secure="'+f+'" '),"R"==(l=ifUndefined(ormObject.fk[i].role,"X"))&&(t+='root="1" '),"P"==l&&(t+='parent="1" '),"L"==l&&(t+='level="1" '),t+="/>\n"}t+="\t</table>\n\n";var c=ormObject.table.editorDatabaseID.substring(1,ormObject.table.editorDatabaseID.length-1).split(",");for(i in c){var m,u,s=c[i];isNumeric(s)&&(m=ifUndefined(ormObject.table["dbSchema"+s].trim(),""))+(u=ifUndefined(ormObject.table["pkSql"+s].trim(),""))!=""&&(t+='\t<schema silkDatabaseID="'+s+'" ',""!=m&&(t+='value="'+m+'" '),"SQL"==ormObject.table.pkMode?t=(t+=">")+(""!=u?"\n\t\t<![CDATA[\n\t\t\t"+replaceAll(u,"\n","\n\t\t\t")+"\n\t\t]]>\n":"\n")+"\t</schema>\n\n":t+="/>\n")}t+="\n";for(i=0;i<ormObject.select.length;i++)for(y in c){var b,p=c[y],O=ormObject.select[i]["sql"+p];isEmpty(O)||(t+="\t<sqlSelect ",b=ormObject.select[i].selectName,"default"!=ifUndefined(b,"default")&&(t+='name="'+b+'" '),"ORM"==e&&(t+='silkDatabaseID="'+p+'" '),U=ormObject.select[i].origin,"0"!=ifUndefined(U,"0")&&(t+='origin="'+U+'" '),t=(t+=">\n")+"\t\t<![CDATA[\n\t\t\t"+replaceAll(O,"\n","\n\t\t\t")+"\n\t\t]]>\n\t</sqlSelect>\n\n")}for(i=0;i<ormObject.operation.length;i++)for(y in c){var U,h=c[y],O=ormObject.operation[i]["sql"+h];isEmpty(O)||(t+="\t<sqlOperation ","ORM"==e&&(t+='silkDatabaseID="'+h+'" '),"exec"==(r=ormObject.operation[i].type)?(h=ormObject.operation[i].operationName,""!=ifUndefined(h,"")&&(t+='name="'+h+'" ')):(h=ormObject.operation[i].when,""!=ifUndefined(h,"")&&(t+='when="'+h+'" '),h=ormObject.operation[i].action,""!=ifUndefined(h,"")&&(t+='action="'+h+'" ')),U=ormObject.operation[i].origin,"0"!=ifUndefined(U,"0")&&(t+='origin="'+U+'" '),d=ormObject.operation[i].authorization,""!=ifUndefined(d,"")&&(t+='authorization="'+d+'" '),h=ormObject.operation[i].reportZeroResult,"0"!=ifUndefined(h,"0")&&(t+='reportZeroResult="'+h+'" '),t=(t+=">\n")+"\t\t<![CDATA[\n\t\t\t"+replaceAll(O,"\n","\n\t\t\t")+"\n\t\t]]>\n\t</sqlOperation>\n\n")}for(i=0;i<ormObject.authorization.length;i++)for(y in c){var j=c[y],O=ormObject.authorization[i]["sql"+j];isEmpty(O)||(t=t+'\t<sqlAuthorization silkDatabaseID="'+j+'" ',j=ormObject.authorization[i].authorizationName,""!=ifUndefined(j,"")&&(t+='name="'+j+'" '),t=(t+=">\n")+"\t\t<![CDATA[\n\t\t\t"+replaceAll(O,"\n","\n\t\t\t")+"\n\t\t]]>\n\t</sqlAuthorization>\n\n")}return t+="</orm>"},ormXMLtoObject=function(){var e=new Object,t=ormXML.find("orm"),t=(e.remoteService=ifUndefined(t.attr("remoteService"),""),e.queryType=ifUndefined(t.attr("queryType"),"SQL"),ormXML.find("table")),n=(e.tableName=ifUndefined(t.attr("name"),""),e.pkMode=ifUndefined(t.attr("pkMode"),"Auto"),e.insertAuthorization1=ifUndefined(t.attr("insertAuthorization"),""),e.updateAuthorization1=ifUndefined(t.attr("updateAuthorization"),""),e.deleteAuthorization1=ifUndefined(t.attr("deleteAuthorization"),""),ormXML.find("pkSQL"),e.pkSql1=ormXML.find("pkSQL").text().trim(),ormObject.table=e,new Array),i=(ormXML.find("column").each(function(){var e=new Object,t=$(this);e.columnName=ifUndefined(t.attr("name"),""),e.type=ifUndefined(t.attr("type"),"S"),e.pk="0","true,1,on".indexOf(-1<ifUndefined(t.attr("pk"),"0"))&&(e.pk="1"),e.secure="0","true,1,on".indexOf(-1<ifUndefined(t.attr("secure"),"0"))&&(e.secure="1"),e.role="X","true,1,on".indexOf(-1<ifUndefined(t.attr("root"),"0"))&&(e.role="R"),"true,1,on".indexOf(-1<ifUndefined(t.attr("parent"),"0"))&&(e.role="P"),"true,1,on".indexOf(-1<ifUndefined(t.attr("level"),"0"))&&(e.role="L"),e.translation=ifUndefined(t.attr("translation"),"0"),"false"==e.translation&&(e.translation="0"),-1<"true,xml,1".indexOf(e.translation)&&(e.translation="1"),-1<"column,2".indexOf(e.translation)&&(e.translation="2"),e.function1=ifUndefined(t.attr("function"),""),e.functionInsert1=ifUndefined(t.attr("functionInsert"),""),e.functionUpdate1=ifUndefined(t.attr("functionUpdate"),""),e.nullValue=ifUndefined(t.attr("nullValue"),""),e.validation=ifUndefined(t.attr("validation"),""),e.authorization=ifUndefined(t.attr("authorization"),""),e.description="",e.sqlType1="",e.sqlDefaultValue1="",e.fkTable="",e.fkColumn="",e.fkAction="",n.push(e)}),ormObject.column=n,new Array),a=(ormXML.find("sqlSelect").each(function(){var e=new Object,t=$(this);e.selectName=ifUndefined(t.attr("name"),"default"),e.sql1=t.text().trim(),e.description="",i.push(e)}),ormObject.select=i,new Array),r=(ormXML.find("sqlOperation").each(function(){var e=new Object;$operation=$(this),e.operationName=ifUndefined($operation.attr("name"),""),e.type="exec",""!=e.operationName&&(e.type="trigger"),e.action=ifUndefined($operation.attr("action"),""),e.when=ifUndefined($operation.attr("when"),""),e.sql1=$operation.text().trim(),e.description="",e.authorization=ifUndefined($operation.attr("authorization"),""),e.reportZeroResult=ifUndefined($operation.attr("reportZeroResult"),"0"),a.push(e)}),ormObject.operation=a,new Array);ormXML.find("sqlAuthorization").each(function(){var e=new Object;$authorization=$(this),e.authorizationName=ifUndefined($authorization.attr("name"),""),e.sql1=$authorization.text().trim(),e.description="",r.push(e)}),ormObject.authorization=r};