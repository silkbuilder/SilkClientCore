var Button=function(t,e){this.className="Button",""==ifUndefined(e,"")&&(e={});var i=ifUndefined(e.targetPage,""),n=(this.singleClick=ifUndefined(e.singleClick,!0),this.autoEnable=ifUndefined(e.autoEnable,!0),ifUndefined(e.confirmTitle,void 0)),s=ifUndefined(e.confirmMessage,void 0),a=ifUndefined(e.confirmLabel,void 0),o=ifUndefined(e.confirmIcon,void 0),l=ifUndefined(e.toggleList,""),r=(this.$button=null,new EventManager),d=new ToggleManager(l);this.on=r.on,this.setLabel=function(t){this.$button.find(".silk-button-label").text(t)},this.getLabel=function(){return this.$button.find(".silk-button-label").html()},this.getNeedsConfirmation=function(){return!(isEmpty(n)&&isEmpty(s)&&isEmpty(a)&&isEmpty(o))},this.setConfirmTitle=function(t){n=t},this.getConfirmTitle=function(){return n},this.setConfirmMessage=function(t){s=t},this.getConfirmMessage=function(){return s},this.setConfirmLabel=function(t){a=t},this.getConfirmLabel=function(){return a},this.setConfirmIcon=function(t){o=t},this.toggle=function(t){null==t?this.$button.toggle():"boolean"==typeof t?this.$button.toggle(t):this.$button.toggle(callFunction(t)),isNotEmpty(l)&&d.toggle("none"!=this.$button.getCSSValue("display"),this.$button)},this.hide=function(){this.toggle(!1)},this.show=function(){this.toggle(!0)},this.setDisable=function(t){null==t&&(t=!0),callFunction(t)?this.$button.prop("disabled","disabled"):this.$button.prop("disabled","")},this.setEnable=function(t){(t=null==t?!0:t)?this.$button.prop("disabled",""):this.$button.prop("disabled","disabled")},this.click=function(){r.dispatch("click"),this.go()},this.confirm=function(){ifUndefined(r.dispatch("beforeClick"),!0)&&silk.confirmation(this,void 0,ifUndefined(n,this.getLabel()),s,a,o)},this.go=function(){var t;""!=i&&(t="",null!=(t=-1<i.indexOf("(")?i():i))&&""!=t&&window[t].show()},this.initButton=function(){this.$button=$("#"+t),this.$button.click($.proxy(function(){if(!this.getNeedsConfirmation())return ifUndefined(r.dispatch("beforeClick"),!0)?(this.click(),void(this.singleClick&&(this.setDisable(!0),this.autoEnable)&&setTimeout($.proxy(function(){this.setDisable(!1)},this),500))):void 0;ifUndefined(r.dispatch("validateConfirm"),!0)?this.confirm():this.click(),this.singleClick&&(this.setDisable(!0),this.autoEnable)&&setTimeout($.proxy(function(){this.setDisable(!1)},this),500)},this))}},ChartJS=function(t,e){this.$target,this.$canvas,this.$title,this.chartObject,""==ifUndefined(e,"")&&(e={});var i=ifUndefined(e.chartType,"bar"),n=ifUndefined(e.dataSource,""),s=ifUndefined(e.labelColumn,""),a=ifUndefined(e.dataColumn,""),o=ifUndefined(e.backgroundColor,"#1886C1"),l=ifUndefined(e.showGrid,!0),r=ifUndefined(e.showLegend,!1),d=ifUndefined(e.indexAxis,"x"),c=ifUndefined(e.tooltip,!1),e=ifUndefined(e.dataLabels,!0),h=new EventManager,u=(this.on=h.on,{labels:[],datasets:[]}),p=new Array;if(""!=a){var f=a.split(","),g=o.split(",");for(x in f){var a=f[x].trim(),m="1886C1",b=(g.length>x&&(m=g[x].trim().split("|")),new Object);b.dataColumn=a,b.backgroundColor=m,b.data=new Array,p.push(b)}}this.config={type:i,data:null,options:{animation:!0,indexAxis:d,layout:{padding:20},plugins:{legend:{display:r,position:"bottom"},tooltip:{enabled:c},datalabels:{display:!1}},scales:{y:{grace:"25%",display:l},x:{grace:"25%",display:l}},onClick:function(t,e,i){var n=-1,s=-1,a=void 0;e&&0<e.length?(n=e[0].index,s=getNumber(e[0].element.$context.raw)):a=i.getElementsAtEventForMode(t,"nearest",{intersect:!1},!0),null!=a&&0<a.length&&(n=a[0].index),e=i.config._config.data.labels[n],h.dispatch("click",n,s,e)},onResize:$.proxy(function(t,e){setTimeout($.proxy(function(){this.setTitle()},this),200),h.dispatch("resize",e)},this)}},e&&(this.config.options.plugins.datalabels={display:!0,anchor:"end",align:"end",formatter:Math.round,font:{weight:"bold",size:14}}),this.hide=function(){this.toggle(!1)},this.show=function(){this.toggle(!0)},this.toggle=function(t){this.$target.toggle(t)},this.setTitle=function(t){isEmpty(t)||this.$title.html(t),this.$title.parent().hasClass("silk-chart-middle-title")&&null!=this.chartObject&&(t=(this.chartObject.chartArea.height+40)/2-this.$title.height()/2,this.$title.parent().css("top",t+"px"))},this.load=function(){h.dispatch("beforeLoad");try{this.chartObject.destroy()}catch(t){}for(x in u.labels=new Array,f)p[x].data=new Array;if(""!=n){for(x=0;x<n.size();x++)for(y in u.labels.push(n.getItemAt(x,s)),p){var t=p[y].dataColumn;p[y].data.push(n.getItemAt(x,t))}u.datasets=p}this.config.data=u,this.chartObject=new Chart(this.$canvas,this.config),h.dispatch("afterLoad"),this.setTitle()},this.initChart=function(){this.$target=$("#"+t),this.$canvas=this.$target.find("canvas"),this.$title=this.$target.find(".silk-chart-title")}},Column=function(id,options){this.$th=null;var title=ifUndefined(options.title,""),tableID=ifUndefined(options.tableID,""),template=ifUndefined(options.template,""),width=ifUndefined(options.width,0),align=ifUndefined(options.align,""),valign=ifUndefined(options.valign,""),wrap=ifUndefined(options.wrap,!0),rendererFn=ifUndefined(options.rendererFn,""),targetPage=ifUndefined(options.targetPage,""),cssClass=ifUndefined(options.cssClass,""),draggable=ifUndefined(options.draggable,!1),ordering=ifUndefined(options.ordering,!1),inputType=ifUndefined(options.inputType,""),inputMask=ifUndefined(options.inputMask,""),valueColumn=ifUndefined(options.valueColumn,""),labelColumn=ifUndefined(options.labelColumn,""),visibleColumn=ifUndefined(options.visibleColumn,""),sortColumn=ifUndefined(options.sortColumn,""),idColumn=ifUndefined(options.idColumn,""),cleanIf=ifUndefined(options.cleanIf,""),distinct=ifUndefined(options.distinct,""),eventManager=(this.hasInput=""!=inputType||""!=valueColumn,this.renderer=null,new EventManager);this.on=eventManager.on,this.getTableID=function(){return tableID},this.setTableID=function(t){tableID=t},this.getTemplate=function(){return template},this.setTemplate=function(t){template=t},this.getData=function(index,item){var data=getTemplateData(template,index,item,this.renderer);if(""!=cleanIf)if("empty"==cleanIf){if(isEmpty(data))return""}else if(cleanIf=cleanIf.replaceAll("?","'"+data+"'"),eval(cleanIf))return"";return data},this.getInput=function(t,e,i,n,s){var a,o,l,r,d,c;return this.hasInput?(a="{}",null!=s&&(a=JSON.stringify(s)),s="text",c="",c=null!=n?n:inputMask,(l=o=n="")!=idColumn&&(l="id='"+e[idColumn]+"' "),""!=valueColumn&&(null==(o=e[valueColumn])&&(o=""),n=tableID+"-input "+tableID+"-"+valueColumn+"-input"),(r="")==(c="html"==(s=null!=i?i:inputType)?"":c)?c="number"==s||"integer"==s.toLowerCase()?(r="text-right","data-mask=\"###,###'###,###\" data-mask-reverse='true'"):-1!=s.indexOf("decimal")?(r="text-right",i=getNumber(s),d="###,###'###,###."+"0".repeat(i=0==i?2:i)+"D",isNotEmpty(o)&&(o=getFormattedValue(getNumber(o,i),d)),'data-mask="'+d+"\" data-mask-reverse='true'"):"":(c='data-mask="'+c+'" ','D"'==right(c.trim(),2)&&(c+=" data-mask-reverse='true'",r="text-right")),i="",i=0==width?"width:fit-content;":"width:"+width+";","textarea"==s?"<textarea "+l+" type='text' class='form-control "+r+" "+n+"' data-type='"+s+"' data-column='"+valueColumn+"' data-value='"+o+"' data-index='"+t+"' data-json='"+a+"' style='"+i+" display:initial;' "+c+" >"+o+"</textarea>":"html"==s?"<div "+l+" contenteditable='true' type='html' class='form-control "+r+" "+n+"' data-type='"+s+"' data-column='"+valueColumn+"' data-value='"+o+"' data-index='"+t+"' data-json='"+a+"' style='"+i+" display:initial; display:block !important; width: 100% !important; height: auto !important;' "+c+" >"+o+"</div>":"<input "+l+" type='text' class='form-control "+r+" "+n+"' value='"+o+"' data-type='"+s+"' data-column='"+valueColumn+"' data-value='"+o+"' data-index='"+t+"' data-json='"+a+"' style='"+i+" display:initial;' "+c+" />"):this.getData(t,e)},this.getID=function(){return id},this.getTitle=function(){return ifUndefined(title,"")},this.setTitle=function(t){title=t},this.getWidth=function(){return ifUndefined(width,"")},this.setWidth=function(t){width=t},this.getAlign=function(){return ifUndefined(align,"")},this.setAlign=function(t){return align=t},this.getValign=function(){return ifUndefined(valign,"")},this.setValign=function(t){valign=t},this.getWrap=function(){return ifUndefined(wrap,!0)},this.setWrap=function(t){wrap=t},this.getTargetPage=function(){return ifUndefined(targetPage,"")},this.setTargetPage=function(t){targetPage=t},this.getCssClass=function(){return ifUndefined(cssClass,"")},this.setCssClass=function(t){cssClass=t},this.getDraggable=function(){return!!draggable},this.getOrdering=function(){return!!ordering},this.getInputType=function(){return inputType},this.getInputMask=function(){return inputMask},this.getValueColumn=function(){return valueColumn},this.getLabelColumn=function(){return labelColumn},this.getVisibleColumn=function(){return visibleColumn},this.getSortColumn=function(){return sortColumn},this.getVisible=function(t){return!eventManager.eventExists("visible")||(t=eventManager.dispatch("visible",t),ifUndefined(t,!0))},this.setDistinct=function(t){distinct=t},this.getDistinct=function(){return distinct},this.showPage=function(){isEmpty(targetPage)||window[targetPage].show()},this.initColumn=function(){""!=rendererFn&&(this.renderer=window[rendererFn]),""!=id&&(this.$th=$("#"+id))}},DataProvider=function(h,t,e){this.className="dataProvider",""==ifUndefined(t,"")&&(t={});function u(t){var e=silk.dpLoader.map(function(t){return t.dataProvider}).indexOf(h);-1<e&&(silk.dpLoader[e].status=t)}function n(t,e){if(null==t[r])return 1;t=""+t[r].toLowerCase(),e=""+e[r].toLowerCase(),0<isNumeric(t)&&0<isNumeric(e)&&(t=getNumber(t),e=getNumber(e));let i=0;return e<t?i=+d:t<e&&(i=-1*d),i}var c,p,f=ifUndefined(t.servicePath,""),g=ifUndefined(t.selectName,"default"),m=ifUndefined(t.treeData,!1),s=ifUndefined(t.markDeleted,!1),b=ifUndefined(t.isPublic,!1),v=ifUndefined(t.debugLevel,0),w=ifUndefined(t.pkColumn,""),y=(ifUndefined(t.dataSource,""),ifUndefined(t.timeout,3e4)),a=ifUndefined(t.dpSort,!1),k=(this.doRecordSync=!1,this.recordSyncSelect="",t.recordSync&&(this.doRecordSync=!0,this.recordSyncSelect=""+t.recordSync),this.execRecordSyncAfterLoadingSelect=!1,this.linkedDP=t.linkedDP,-1),o=(this.getTreeInitLevel=function(){return k},""),I=(this.setLangID=function(t){o=t},this.getLangID=function(){return o},this.getID=function(){return h},this.setTimeout=function(t){y=t},new EventManager),A=(this.on=I.on,(I.dp=this).isLoading=!1,this.selectObject=new ReturnObject,this.operationObject=new ReturnObject,this.action="select",this.operation="select",new RequestObject),C=(operationIndex=-1,this.selectedIndex=-1,this.setSelectedIndex=function(t,e){this.selectedIndex=t,operationIndex=null==e?t:e},this.getOperationIndex=function(){return operationIndex},this.sourceType="SQL",""==f&&(this.sourceType="Local",""!=w)&&(this.selectObject.pkColumn=w),"/"!=f.substring(0,1)&&(f="/"+f),this.getService=function(){return f},this.getSelectName=function(){return g},this.setSelectName=function(t){g=t,0==A.operationList.length?A.setOperationAction("select",g):A.operationList[0].operation=g},this.getPkColumn=function(){var t=this.selectObject.pkColumn;return null==t?"nopk":t},this.getPKValue=function(){return this.getItemAt(this.selectedIndex,this.getPkColumn())},this.getOperationItem=function(t){return 0==this.operationObject.data.length?{}:this.operationObject.data[t=null==t?0:t]},this.getSelectedItem=function(t){return-1==this.selectedIndex?new Object:null==t?this.getItemAt(this.selectedIndex):this.getItemAt(this.selectedIndex,t)},this.isTreeData=function(){return m},this.getIndex=function(t){for(var e in this.selectObject.data)if(this.selectObject.data[e][this.selectObject.pkColumn]==t)return getNumber(e);return-1},this.getIndexItem=function(t){for(var e in this.selectObject.data)if(this.selectObject.data[e][this.selectObject.pkColumn]==t)return this.selectObject.data[e]},this.getIndexOf=function(t,e){for(var i in this.selectObject.data)if(this.selectObject.data[i][t]==e)return getNumber(i);return-1},this.getIndexItemOf=function(t,e){for(var i in this.selectObject.data)if(this.selectObject.data[i][t]==e)return this.selectObject.data[i]},new Array),L=(this.addComponent=function(t){C.push(t)},this.getComponents=function(){return C},this.cleanParameters=function(){A.cleanParameters()},this.setParameter=function(t,e,i,n){null==e&&console.error("Parameter "+t+" is undefined"),A.setParameter(t,e,i,n)},this.cleanOperations=function(t){A.cleanOperations(),(t=null==t?!1:t)&&(this.action="select",this.opearation=g,A.setOperationAction("select",g))},this.setOperationAction=function(t,e){A.setOperationAction(t,e)},this.setOperationItem=function(t,e){A.setOperationItem(t,e)},this.select=function(t){this.action="select",this.operation="select",A.cleanOperations(),null==t&&(t=g),A.setOperationAction("select",t),this.load(!0)},this.insert=function(){this.action="insert",this.operation="insert",A.setSingleOperationAction("insert"),this.load(!0)},this.recordSync=function(t){this.action="select",this.operation="_recordSync_",A.cleanOperations(),t?A.setOperationAction("select",t):"true"==this.recordSyncSelect?A.setOperationAction("select",g+"-recordSync"):A.setOperationAction("select",this.recordSyncSelect),this.load(!0)},this.update=function(t){null!=t?operationIndex=t:(t=A.getOperationColumnItemValue(this.getPkColumn()),isNotEmpty(t)&&(operationIndex=this.getIndex(t))),this.action="update",this.operation="update",A.setSingleOperationAction("update"),this.load(!0)},this.delete=function(t){null!=t?operationIndex=t:(t=A.getOperationColumnItemValue(this.getPkColumn()),isNotEmpty(t)&&(operationIndex=this.getIndex(t))),this.action="delete",this.operation="delete",s?(I.dispatch("markDeleted",A),A.setSingleOperationAction("update","delete")):A.setSingleOperationAction("delete"),this.load(!0)},this.batch=function(){this.action="batch",this.operation="batch",this.load(!0)},this.exec=function(t){this.action="exec",this.operation=t,A.cleanOperations(),A.setOperationAction("exec",t),this.load(!0)},this.callAction=function(t,e){null!=e&&(operationIndex=e),A.operationList=t,this.action=A.operationList[0].action,this.operation=A.operationList[0].action,s&&"delete"==this.action&&(null!=this.onMarkDeleted&&this.onMarkDeleted(A),I.dispatch("markDeleted",A),A.operationList[0].action="update",A.operationList[0].operation="delete"),this.load()},this.getItemAt=function(t,e){var i;if(!(t<0)&&t!=this.length())return null==e?((i=this.selectObject.data[t])._recordIndex=parseInt(t),i):this.selectObject.data[t][e]},this.getItem=function(t){return null==t?this.getItemAt(0):this.getItemAt(0,t)},this.setItem=function(t,e){this.selectObject.data[0][t]=e},this.setItemAt=function(t,e,i){this.selectObject.data[t][e]=i},this.length=function(){return null==this.selectObject?0:this.selectObject.data.length},this.size=function(){return this.length()},this.load=function(t){if(this.isLoading=!0,0<v&&(c=new Date,console.log(h+": Start Loading ")),"_recordSync_"!=this.operation&&u(1),null==t&&(t=!1),"Local"==this.sourceType&&"select"==this.action)0<this.selectObject.data.length&&-1==this.selectedIndex&&(operationIndex=0,this.selectedIndex=0),O(this.action,operationIndex),I.dispatch("afterLoad",this.action,this.action),I.dispatch("afterSelect"),u(2);else if("Local"==this.sourceType&&-1<"insert,update,delete".indexOf(this.action))s=new ReturnObject,(i=new Object)[this.getPkColumn()]=A.getOperationColumnItemValue(this.getPkColumn()),s.data.push(i),this.loadCallback(s);else if(ifUndefined(I.dispatch("beforeLoad",this.action,this.operation),!0)){if("select"==this.action)if("_recordSync_"==this.operation){for(x in C){var e=C[x];null!=e.recordSyncLoading&&(e.recordSyncLoading=!1)}if(!ifUndefined(I.dispatch("beforeRecordSync",this.operation),!0))return}else if(!ifUndefined(I.dispatch("beforeSelect",this.operation),!0))return;if(("insert"!=this.action||ifUndefined(I.dispatch("beforeInsert"),!0))&&("update"!=this.action||ifUndefined(I.dispatch("beforeUpdate"),!0))&&("delete"!=this.action||ifUndefined(I.dispatch("beforeDelete"),!0))&&("batch"!=this.action||ifUndefined(I.dispatch("beforeBatch"),!0))&&("exec"!=this.action||ifUndefined(I.dispatch("beforeExec",this.operation),!0))){"select"!=this.action||t||(A.operationList[0].operation=g),""!=this.getLangID()&&(A.langID=this.getLangID()),null!=v&&(A.debugLevel=""+v),A.serviceURL=ifUndefined(window.location.pathname,"");var n=A.getJSONString();if(-1<"insert,update,delete".indexOf(this.action)){var i,s,a=JSON.parse(n),o=new Array,l=!1,r=!1;for(x in a.operationList[0].columnList)null==a.operationList[0].columnList[x].scope&&o.push(a.operationList[0].columnList[x]),m&&"insert"==this.action&&(l=a.operationList[0].columnList[x].column==this.selectObject.levelControlColumn,r=a.operationList[0].columnList[x].column==this.selectObject.parentTreeColumn);a.operationList[0].columnList=o,m&&"insert"==this.action&&(r||((i=new Object).column=this.selectObject.parentTreeColumn,i.value=this.getItemAt(operationIndex,this.selectObject.rootTreeColumn),a.operationList[0].columnList.push(i)),l||((s=new Object).column=this.selectObject.levelControlColumn,s.value=this.getItemAt(operationIndex,this.selectObject.levelControlColumn)+1,isNaN(s.value)&&(s.value=0),a.operationList[0].columnList.push(s))),n=JSON.stringify(a)}var d=contextPath;window.location.href.includes("/link/")?d+="/link":d+=b?"/link":"/service",d+=f,1<v&&(console.log(h+": Request Object. "),console.log(JSON.parse(n))),$.ajax({url:d,context:this,data:{requestObject:n},dataType:"json",error:function(t,e,i){console.log("DataProvider: "+h),console.log("Service: "+d),console.log("jsonString: "+n),console.log("timeout: "+y),console.log(t),console.log(e),console.log(i),console.log(t.responseText),u(3),silk.alert("Data Access Error","Triggered by "+h,"warning")},success:function(t){0<v&&console.log(h+": Server responded"),1<v&&(console.log(h+": Return Object"),console.log(t)),2<v&&(console.log(h+": Server message"),console.log(t.debugMessage)),t.error?this.errorHandle(t):this.loadCallback(t),this.isLoading=!1,0<v&&(p=new Date,t=Math.abs(p.getTime()-c.getTime()),console.log(" "+h+": "+this.size()+" records, loading time: "+t/1e3+" sec."))},type:"POST",timeout:y})}}},this.clean=function(){this.loadCallback(new ReturnObject)},this.errorHandle=function(t){S(this.action,operationIndex),I.eventExists("error")?I.dispatch("error",t):(console.error(t.stackTrace),silk.alert("Service Error","An error happened while reaching the service. Please try again later.","error")),this.action="select",this.cleanOperations(!0),u(2)},this.loadCallback=function(t){if("select"==this.action)if(0<v&&console.log(h+": Handling Select."),"_recordSync_"==this.operation){var e=t.data[0],i=e[this.selectObject.pkColumn],n=this.getIndex(i);if(-1==n)return;var s,a=Object.keys(e);for(s in a){var o=a[s];this.selectObject.data[n][o]=e[o]}0<v&&console.log(h+": Loaded record sync.")}else this.selectObject=t,I.eventExists("processLoadedData")&&(null!=(i=I.dispatch("processLoadedData",t))&&(this.selectObject=i),0<v)&&console.log(h+": Process Loaded Data"),m&&(t=L(t)),""!=w&&(this.selectObject.pkColumn=w),0<this.length()&&(this.selectedIndex=0,operationIndex=0);else if("insert"==this.action){0<v&&console.log(h+": Handling Insert."),this.operationObject=t;var l=new Object,r=!1,d=!1;for(s in A.operationList[0].columnList){var o=A.operationList[0].columnList[s].column,c=A.operationList[0].columnList[s].value;l[o]=c,m&&"insert"==this.action&&(r=o==this.selectObject.levelControlColumn,d=o==this.selectObject.parentTreeColumn)}l[this.operationObject.pkColumn]=this.operationObject.data[0][this.operationObject.pkColumn],m&&"insert"==this.action&&(d||(l[this.selectObject.parentTreeColumn]=this.getItemAt(operationIndex,this.selectObject.rootTreeColumn)),r||(i=this.getItemAt(operationIndex,this.selectObject.levelControlColumn)+1,l[this.selectObject.levelControlColumn]=i,l._treeLevel=i-k),l._childrenCount),this.selectObject.data.push(l),operationIndex=this.selectObject.data.length-1}else if("update"==this.action){for(s in 0<v&&console.log(h+": Handling Update."),this.operationObject=t,A.operationList[0].columnList){o=A.operationList[0].columnList[s].column,c=A.operationList[0].columnList[s].value;0<this.selectObject.data.length&&(this.selectObject.data[operationIndex][o]=c)}1==this.operationObject.transactionType&&0<this.selectObject.data.length&&(this.selectObject.data[operationIndex][this.operationObject.pkColumn]=this.operationObject.data[0][this.operationObject.pkColumn])}else"delete"==this.action?(0<v&&console.log(h+": Handling Delete."),this.operationObject=t,m&&(i=this.selectObject.data[operationIndex][this.selectObject.parentTreeColumn],this.operationObject.data[0][this.selectObject.parentTreeColumn]=i),0<this.selectObject.data.length&&this.selectObject.data.splice(operationIndex,1)):this.operationObject=t;"exec"!=this.action&&"batch"!=this.action&&$.proxy(O(this.action,operationIndex,this.operation),this);i=this.action,t=this.operation;this.cleanOperations(!0),this.action="select",I.dispatch("afterLoad",i,t),"select"==i&&("_recordSync_"==t?I.dispatch("afterRecordSync",t):I.dispatch("afterSelect",t)),"insert"==i&&I.dispatch("afterInsert"),"update"==i&&I.dispatch("afterUpdate"),"delete"==i&&I.dispatch("afterDelete"),"batch"==i&&I.dispatch("afterBatch"),"exec"==i&&I.dispatch("afterExec",t),u(2),"insert"==i&&this.doRecordSync&&this.recordSync(),"select"==i&&this.execRecordSyncAfterLoadingSelect&&(this.execRecordSyncAfterLoadingSelect=!1,this.recordSync())},function(t){var e=new Array;for(x in k=-1,t.data){var n,s=t.data[x],a=(s._childrenCount=0,s[t.levelControlColumn]),o=(-1==k&&(k=a),s._treeLevel=a-k,-1);for(i=0;i<e.length;i++)if(e[i][t.rootTreeColumn]==s[t.parentTreeColumn]&&e[i][t.levelControlColumn]==a-1){o=i;break}-1==o?e.push(s):(e[o]._childrenCount++,n=o+e[o]._childrenCount,e.splice(n,0,s))}return t.data=e,t}),l="",r="",d=1,O=(this.setSortColumn=function(t,e){null!=e&&(d=e<0?-1:1),r=l=t},this.getSortColumn=function(){return l},this.getSQLSortColumn=function(){var t=l.trim().split(",");for(x=0;x<t.length;x++)t[x]=1==d?t[x].trim()+" asc":t[x].trim()+" desc";return t.toString()},this.getSortDirection=function(t){return d},this.sort=function(t,e){null==e&&(e=!0),m||(e&&(d=r==t?-1:1),r=l=t,a?this.select():(this.selectObject.data.sort(n),O()),-1==d&&(r=""))},this.getChildren=function(e){var i=[];if(!m)return[];for(let t=0;t<this.selectObject.data.length;t++)if(this.selectObject.data[t][this.selectObject.parentTreeColumn]==e){var n=this.selectObject.data[t][this.selectObject.pkColumn],s=(i.push(n),this.getChildren(n));for(let t=0;t<s.length;t++)i.push(s[t])}return i},function(t,e,i){for(x in null==i&&(i=""),C){var n=C[x];"_recordSync_"===i?(null!=n.recordSyncLoading&&(n.recordSyncLoading=!1),null!=n.refreshRow&&n.refreshRow(),null!=n.selectRow&&n.selectRow()):(0<v&&console.log(h+": Notify Load in "+n.getID()),null!=n.load&&n.load(t,e))}if(this.linkedDP)for(item of linkedDP.split(","))window[item.trim()].load()}),S=function(t,e){for(x in C)null!=C[x].errorHandle&&C[x].errorHandle(t,e);I.dispatch("afterLoad",t,e)};this.loadJSON=function(t){this.selectObject.data=JSON.parse(t),""==w&&(this.selectObject.pkColumn="value"),0<this.selectObject.data.length&&(operationIndex=0,this.selectedIndex=0)},null!=e&&this.loadJSON(e),this.cleanOperations(!0)},EventManager=function(){var p=new Array,s=new Array;this.getList=function(){return p},this.on=function(t,e){if(null==t&&null==e)return p;var i=t.split(",");for(x in i){var n=new Object;n.eventName=i[x].trim(),n.eventFunction=e,-1==s.indexOf(n.eventName)&&s.push(n.eventName),null!=this.className&&"dataProvider"==this.className&&(n.setParameter=this.setParameter,n.setSelectName=this.setSelectName,n.getSelectName=this.getSelectName,n.getItem=this.getItem,n.getItemAt=this.getItemAt,n.setLangID=this.setLangID),p.push(n)}},this.eventExists=function(t){return-1<s.indexOf(t)},this.dispatch=function(t,e,i,n,s,a,o,l,r,d,c){let h=void 0;if(this.eventExists(t))for(var u in p)p[u].eventName==t&&null!=(u=p[u].eventFunction(e,i,n,s,a,o,l,r,d,c))&&(h=u);return h}},Form=function(e,t){this.className="form",""==ifUndefined(t,"")&&(t={});var o,i=ifUndefined(t.startMode,!1),l=ifUndefined(t.dialog,!0),r=ifUndefined(t.dataSource,null),d=(this.insertBt=ifUndefined(t.insertBt,null),this.updateBt=ifUndefined(t.updateBt,null),this.deleteBt=ifUndefined(t.deleteBt,null),this.cancelBt=ifUndefined(t.cancelBt,null),this.submitBt=ifUndefined(t.submitBt,null),ifUndefined(t.dialogTitle,""),ifUndefined(t.insertTitle,"Adding")),c=ifUndefined(t.updateTitle,"Editing"),h=ifUndefined(t.deleteTitle,"Deleting"),n=ifUndefined(t.insertMessage,"Created"),s=ifUndefined(t.updateMessage,"Edited"),a=ifUndefined(t.deleteMessage,"Deleted"),u=ifUndefined(t.toggleList,""),p=ifUndefined(t.toggleEdit,""),f=ifUndefined(t.autoFocus,!0),g="Cancel",m="Submit",b=ifUndefined(t.confirmTitle,""),v=ifUndefined(t.confirmMessage,""),w=ifUndefined(t.confirmLabel,""),y=ifUndefined(t.confirmIcon,""),k=ifUndefined(t.confirmTarget,""),I=!0,A=(isNotEmpty(window.globalTranslationTags)&&("Adding"==d&&(d=globalTranslationTags["global-form-adding"]),"Editing"==c&&(c=globalTranslationTags["global-form-editing"]),"Deleting"==h&&(h=globalTranslationTags["global-form-deleting"]),"Created"==n&&globalTranslationTags["global-form-created"],"Edited"==s&&globalTranslationTags["global-form-edited"],"Deleted"==a&&globalTranslationTags["global-form-deleted"],g=globalTranslationTags["global-button-cancel"],m=globalTranslationTags["global-button-submit"]),this.getID=function(){return e},new EventManager),C=(this.on=A.on,new ToggleManager(u,e)),L=new ToggleManager(p,e),O=(this.toggle=function(t){null==t?this.$form.toggle():"boolean"==typeof t?this.$form.toggle(t):this.$form.toggle(callFunction(t)),isNotEmpty(u)&&C.toggle("none"!=this.$form.getCSSValue("display"),this.$form)},this.hide=function(){this.toggle(!1)},this.show=function(){this.toggle(!0)},this.getEventList=function(){return A.getList()},this.$form,this.mask=!0,"none"),S=void 0,T=!1,U=null,E=null,D=null,_=new Array,j=!1,B=new Object,N=(this.dispatchOnChange=function(t){A.dispatch("change",t)},this.pushInput=function(t){_.push(t)},this.setAction=function(t){O=t},this.getAction=function(){return O},this.getInputs=function(){return _},this.getPage=function(){return S},this.setEnable=function(t){for(x in null==t&&(t=!0),_)this[_[x]].setEnable(t);null!=this.insertBt&&this.insertBt.setEnable(t),null!=this.updateBt&&this.updateBt.setEnable(t),null!=this.deleteBt&&this.deleteBt.setEnable(t),null!=this.cancelBt&&this.cancelBt.setEnable(t),null!=this.submitBt&&this.submitBt.setEnable(t),I=t},this.setDisable=function(t){for(x in null==t&&(t=!0),_)this[_[x]].setEnable(!t);null!=this.insertBt&&this.insertBt.setEnable(!t),null!=this.updateBt&&this.updateBt.setEnable(!t),null!=this.deleteBt&&this.deleteBt.setEnable(!t),null!=this.cancelBt&&this.cancelBt.setEnable(!t),null!=this.submitBt&&this.submitBt.setEnable(!t),I=!t},this.getEnable=function(){return I},this.getDisable=function(){return!I},this.getSelectedItem=function(){return null==r?new Object:r.getSelectedItem()},this.setMode=function(t){var e,i=!0,t=(null!=r&&-1==r.selectedIndex&&(i=!1),j=null!=t&&t,""),t=("insert"==this.getAction()?(null!=this.insertBt&&0<this.insertBt.$button.find(".silk-button-icon").length&&(t=this.insertBt.$button.find(".silk-button-icon")[0].outerHTML+" "),E.html(t+d)):"update"==this.getAction()?(null!=this.updateBt&&0<this.updateBt.$button.find(".silk-button-icon").length&&(t=this.updateBt.$button.find(".silk-button-icon")[0].outerHTML+" "),E.html(t+c)):"delete"==this.getAction()?(null!=this.deleteBt&&0<this.deleteBt.$button.find(".silk-button-icon").length&&(t=this.deleteBt.$button.find(".silk-button-icon")[0].outerHTML+" "),E.html(t+h)):E.text(""),A.dispatch("beforeModeChange",j),null!=S&&this.mask&&window[S].mask(j),null!=this.insertBt&&(t=ifUndefined(A.dispatch("showInsertBt"),!0),this.insertBt.toggle(!j&&t)),!1),n=!1,s=!1,a=!0;if(null!=r&&(t=r.isTreeData(),null!=r.getNoRoot&&(n=r.getNoRoot()),t&&!n&&(a=0<r.selectedIndex),t)&&(s=r.getDeleteBranch()),null!=this.updateBt&&(n=ifUndefined(A.dispatch("showUdatetBt"),!0),this.updateBt.toggle(!j&&a&&n&&i)),null!=this.deleteBt&&(n=0,null==(n=null!=r?r.getSelectedItem()._childrenCount:n)&&(n=0),e=ifUndefined(A.dispatch("showDeletetBt"),!0),this.deleteBt.toggle(!(j||!a||!s)||0==n&&e&&i)),t&&(j?this.$form.show():this.$form.toggle(a)),j?(l&&(T?null!=D&&D.css("visibility","hidden"):null!=D&&D.hide(),null!=U)&&U.css("display",""),null!=this.cancelBt&&this.cancelBt.$button.show(),null!=this.submitBt&&(this.submitBt.$button.show(),P(!0,this),o="delete"==this.getAction()||0==_.length?setInterval($.proxy(function(){P(!1,this)},this),1e3):setInterval($.proxy(function(){V(this)},this),500))):(l&&(T?null!=D&&D.css("visibility","visible"):null!=D&&D.show(),null!=U)&&U.hide(),null!=this.cancelBt&&this.cancelBt.$button.hide(),null!=this.submitBt&&(this.submitBt.$button.hide(),clearInterval(o)),null!=r&&0==r.length()&&(T&&window[S].goBack(),this.clean())),"delete"==this.getAction()&&(j=!1),this.setInputMode(j),null!=S&&window[S].resize(),L.toggle(!j),A.dispatch("afterModeChange",j),A.dispatch("modeChange",j),j&&f){let t=null;for(x in _)null==t&&"hidden"!=this[_[x]].getType()&&j&&f&&this[_[x]].getVisible()&&(t=this[_[x]]);null!=t&&setTimeout(function(){t.focus()},500)}},this.getMode=function(){return j},this.setInputMode=function(t,e){for(x in _)this[_[x]].setMode(t,e)},"text,textarea,code,html,sql,xml,js,xhtml,date,time,datetime,select,numeric,integer,decimal,checkbox,button,options,radio,password,file,email"),P=function(t,e){I?e.submitBt.setDisable(t):e.submitBt.setDisable()},V=function(t){var e=!0,i=!1;for(x in _){var n=t[_[x]];-1<N.indexOf(n.getType())&&(n.hasChanged()&&(e=!1),n.getRequired())&&""==(n=null==(n=null==(n=n.getValue())?"":n)?"":n)&&(i=!0)}var s=!ifUndefined(A.dispatch("submitBtActivation"),!0);P(s=null==s?e||i:s||e||i,t)};this.load=function(){var t;I||this.setEnable(),null!=r&&(A.dispatch("beforeLoad",this.getAction()),t=r.getPkColumn(),-1==_.indexOf(t)&&(this[t]=new Input(e+"_"+t,"hidden","",{columnID:t,target:e,form:window[e]}),this.pushInput(t)),null!=this[t]&&this[t].setScope(0),0==r.length()?this.clean():(B=r.getSelectedItem(),"none"==this.getAction()?(this.fillInputValues(),this.setMode(!1)):this.doCancel()),A.dispatch("afterLoad",this.getAction()))},this.errorHandle=function(){A.dispatch("error",this.getAction()),this.setAction("none"),this.doCancel()},this.fillInputValues=function(){for(x in _)this[_[x]].setValue(B[_[x]])},this.clean=function(){for(x in this.setAction("none"),null!=this.updateBt&&this.updateBt.$button.hide(),null!=this.deleteBt&&this.deleteBt.$button.hide(),_)this[_[x]].setValue("")},this.getOperationList=function(t){var e=new Object,i=(e.action=t,new Array);for(x in _){var n=_[x],s=this[n],a=s.getScope();if(0!=a){if(3==a)continue;if(!s.hasChanged())continue}var o=new Object;if(o.column=n,o.value=s.getValue(),2==a&&(o.scope="2"),i.push(o),"select"==s.getType()){var l=s.getLinkedColumns().split(",");for(x in l)if(l[x]=l[x].trim(),""!=l[x]){var r=l[x].split(":");1==r.length&&r.push(r[0]);try{(o=new Object).column=r[0].trim(),o.value=s.getItem(r[1].trim()),o.scope="2",i.push(o)}catch(t){}}}}e.columnList=i;t=new Array;return t.push(e),t},this.setDialogTitle=function(t){null!=E&&E.text(t)},this.setInsert=function(){"none"==this.getAction()&&(null!=S&&window[S].show(),this.clean(),this.setAction("insert"),this.setMode(!0))},this.setUpdate=function(){"none"==this.getAction()&&(null!=S&&window[S].show(),this.setAction("update"),this.setMode(!0))},this.setDelete=function(){"none"==this.getAction()&&(null!=S&&window[S].show(),this.setAction("delete"),this.setMode(!0))},this.doCancel=function(t){t=t||!1,"none"!=this.getAction()&&(null==S||T&&t||window[S].goBack(),this.setAction("none"),this.setMode(!1),this.fillInputValues(),this.setInputMode(!1))},this.validate=function(){var t=new Array;for(x in _)0<this[_[x]].validate()&&t.push(this[_[x]].getLabel());return t},this.doSubmit=function(t){var e;"none"==this.getAction()&&null!=r||ifUndefined(A.dispatch("beforeSubmit"),!0)&&(0==(e=this.validate()).length?ifUndefined(A.dispatch("submit"),!0)&&null!=r&&(this.setDisable(),r.callAction(this.getOperationList(this.getAction()))):A.dispatch("formErrors",e))},this.getObject=function(){var t,e={};for(t of this.getOperationList()[0].columnList)e[t.column]=t.value;return e},this.getJSON=function(){return JSON.stringify(this.getObject())},this.post=function(t,e){postToService(t,this.getObject(),e,this)},null!=window[e+"_insertBt"]&&(this.insertBt=window[e+"_insertBt"]),null!=window[e+"_updateBt"]&&(this.updateBt=window[e+"_updateBt"]),null!=window[e+"_deleteBt"]&&(this.deleteBt=window[e+"_deleteBt"]),null!=window[e+"_cancelBt"]&&(this.cancelBt=window[e+"_cancelBt"]),null!=window[e+"_submitBt"]&&(this.submitBt=window[e+"_submitBt"]),this.initForm=function(){for(x in this.$form=$("#"+e),U=$("#"+e+"_dialogBar"),E=$("#"+e+"_dialogTitle"),isNotEmpty(window[e+"_cancelBt"])&&window[e+"_cancelBt"].setLabel(g),isNotEmpty(window[e+"_submitBt"])&&window[e+"_submitBt"].setLabel(m),0==U.length&&(U=null),_)this[_[x]].initInput();var t;0<_.length&&null==S&&(null==(S=this[_[0]].$input.closest(".silk-page").attr("id"))&&null!=(S=this[_[0]].$input.closest(".modal").attr("id"))&&(T=!0),null!=S)&&(D=window[S].$page.find(".silk-navbar"),0!=(t=window[S].$page.find(".silk-top-bar")).length&&null!=U&&t.append(U),$("#"+S+"_closeBt").prependTo($("#"+S+"_closeBt").parent())),null!=this.insertBt&&this.insertBt.on("click",$.proxy(function(){ifUndefined(A.dispatch("insert"),!0)&&this.setInsert()},this)),null!=this.updateBt&&this.updateBt.on("click",$.proxy(function(){ifUndefined(A.dispatch("update"),!0)&&this.setUpdate()},this)),null!=this.deleteBt&&this.deleteBt.on("click",$.proxy(function(){ifUndefined(A.dispatch("delete"),!0)&&this.setDelete()},this)),null!=this.cancelBt&&this.cancelBt.on("click",$.proxy(function(){ifUndefined(A.dispatch("cancel"),!0)&&this.doCancel(!0)},this)),""!=b&&this.submitBt.setConfirmTitle(b),""!=v&&this.submitBt.setConfirmMessage(v),""!=w&&this.submitBt.setConfirmLabel(w),""!=y&&this.submitBt.setConfirmIcon(y),isNotEmpty(k)&&this.submitBt.on("validateConfirm",function(){return-1<k.indexOf(O)}),null!=this.submitBt&&this.submitBt.on("click",$.proxy(function(){this.doSubmit()},this)),i&&setTimeout($.proxy(function(){this.setMode(!0),this.setAction("update")},this),400)}},ImageBox=function(t){this.imagePath="",this.$containter,this.$image=void 0,this.zoom=0,this.parentWidth=0,this.parentHeight=0,this.imageWidth=0,this.imageHeight=0,this.load=function(t){this.imagePath=t,this.zoom=0,this.$container.html("<img src='' style='visibility: hidden;' />"),this.$image=this.$container.children().first(),this.$container.parent().css("width",""),this.$container.parent().css("height",""),this.$image.click($.proxy(function(){this.$image.css("width",""),this.$image.css("height",""),0==this.zoom?(this.zoom=1,this.$image.width(this.imageWidth)):(this.zoom=0,this.$image.width(this.parentWidth),this.$image.height()>this.parentHeight&&(this.$image.css("width",""),this.$image.height(this.parentHeight)))},this)),setTimeout($.proxy(function(){this.parentWidth=this.$container.parent().width(),this.parentHeight=this.$container.parent().height(),this.$container.parent().width(this.parentWidth),this.$container.parent().height(this.parentHeight),this.$image.one("load",$.proxy(function(){this.imageWidth=this.$image.width(),this.imageHeight=this.$image.height(),this.$image.width(this.parentWidth),this.$image.height()>this.parentHeight&&(this.$image.css("width",""),this.$image.height(this.parentHeight)),this.$image.css("visibility","")},this)),this.$image.attr("src",this.imagePath)},this),200)},this.initImageBox=function(){this.$container=$("#"+t),this.$container.parent().css("overflow","auto"),this.$container.parent().css("padding","0"),this.$container.parent().attr("align","center"),$(window).resize($.proxy(function(){if(null==this.$image)return!0;this.$image.hide(),this.$container.parent().css("width",""),this.$container.parent().css("height",""),this.parentWidth=this.$container.parent().width(),this.parentHeight=this.$container.parent().height(),this.$container.parent().width(this.parentWidth),this.$container.parent().height(this.parentHeight),0==this.zoom&&(this.$image.css("width",""),this.$image.css("height",""),this.$image.width(this.parentWidth),this.$image.height()>this.parentHeight)&&(this.$image.css("width",""),this.$image.height(this.parentHeight)),this.$image.show()},this))}},Input=function(h,u,p,t,N){""==ifUndefined(t,"")&&(t={}),this.className="input",this.columnID=ifUndefined(t.columnID,h);function V(){var t,e=null,e="textarea"==u||"html"==u||"code"==u?document.createElement("textarea"):"select"==u?document.createElement("select"):"options"==u||"radio"==u?document.createElement("span"):document.createElement("input"),i="",n=" ",s=(""!=y&&(n=i=y),""==m&&("date"===u?m="115px":"time"===u?m="96px":"datetime"===u?m="185px":"numeric"===u?m="100px":"decimal"===u&&(m="130px")),""==k&&("integer"===u&&(k="#,###,##0"),"numeric"===u&&(k="#0"),"decimal"===u)&&(k="#,###,###.00D"),"");if("textarea"!=u&&"html"!=u&&"code"!=u||(s=" height:"+b+";"),"hidden"==u)return e.setAttribute("id",h),e.setAttribute("type","hidden"),""!=i&&e.setAttribute("value",i),P(e,s),e;if("text"!==u&&"email"!==u&&"integer"!==u&&"numeric"!==u&&"decimal"!==u||(e.setAttribute("id",h+"_input"),e.setAttribute("type","text"),""!=i&&e.setAttribute("value",i),P(e,s)),"password"==u&&(e.setAttribute("id",h+"_input"),e.setAttribute("type","password"),P(e,s)),"button"==u&&(e.setAttribute("id",h+"_input"),e.setAttribute("type","button"),P(e,s)),"file"==u&&(e.setAttribute("id",h+"_input"),e.setAttribute("type","hidden"),P(e,s)),"date"!=u&&"time"!=u&&"datetime"!=u||(e.setAttribute("id",h+"_input"),e.setAttribute("type","text"),P(e,s)),"textarea"!=u&&"code"!=u||(e.setAttribute("id",h+"_input"),P(e,s),e.append(i)),isIn(u,"sql","js","css","xml","xhtml")&&(e.setAttribute("id",h+"_input"),e.setAttribute("type","hidden")),"html"==u&&(e.setAttribute("id",h+"_input"),P(e,s),e.append(i)),"checkbox"==u&&(e.setAttribute("id",h+"_input"),e.setAttribute("type","checkbox"),e.setAttribute("class","silk-input-value"),e.setAttribute("name",w),e.setAttribute("style","display: none;")),"select"==u&&(e.setAttribute("id",h+"_input"),e.setAttribute("class","form-control silk-input-value silk-input-select "+Q),e.setAttribute("name",w),e.setAttribute("style","display: none;")),"options"==u&&(e.setAttribute("id",h+"_input"),e.setAttribute("class","form-control silk-input-value"),e.setAttribute("name",w),e.setAttribute("style","display: none;")),"radio"==u&&(e.setAttribute("id",h+"_input"),e.setAttribute("class","form-control silk-input-value"),e.setAttribute("name",w),e.setAttribute("style","display: none;")),(s="file"==u?document.createElement("div"):document.createElement("label")).setAttribute("id",h),G+=""==m?" silk-full-width":" silk-partial-width",s.setAttribute("class","silk-input "+G+" silk-input-box-"+u),"hidden"!=u&&""!=g&&"top"==M&&(t=document.createElement("div")).setAttribute("class","silk-input-description"),"checkbox"==u){i=document.createElement("span");i.setAttribute("class","silk-input-text"),(l=document.createElement("span")).setAttribute("class","fa fa-square-o"),l.setAttribute("aria-hidden","true"),i.append(l),(d=document.createElement("span")).setAttribute("class","silk-input-label"),d.append(p),s.append(i),s.append(e),s.append(document.createTextNode(" ")),s.append(d),null!=t&&s.append(t)}else{if(isIn(u,"sql","js","css","xml","xhtml")){(d=document.createElement("span")).setAttribute("class","silk-input-label silk-input-label-margin");var a="form-control silk-input-value silk-input-code";(c=document.createElement("div")).setAttribute("id",h+"_code"),c.setAttribute("class",a),s.append(d),null!=t&&s.append(t),s.append(c)}else if("file"==u){(d=document.createElement("span")).setAttribute("class","silk-input-label"),d.append(p),s.append(d),null!=t&&s.append(t);(c=document.createElement("span")).setAttribute("class","form-control silk-input-text"),c.append(n),s.append(c);var o,l,i=document.createElement("div"),i=(i.setAttribute("class","form-control silk-input-drop"),i.setAttribute("style","height:"+b),i.innerHTML="<p>"+st+"</p>",s.append(i),document.createElement("div")),i=(i.setAttribute("class","progress silk-input-progress"),i.setAttribute("style","height:50px"),i.innerHTML="<div class='progress-bar progress-bar-striped progress-bar-animated' role='progressbar' style='width: 0%; height:50px' ></div>",s.append(i),document.createElement("input"));if(i.setAttribute("type","file"),i.setAttribute("class","silk-input-browse"),i.setAttribute("style","display: none;"),""!=E){var r=E.split(",");for(x=0;x<r.length;x++){let t=r[x].trim();-1==t.indexOf("/")&&-1==t.indexOf(".")&&(t="."+t),r[x]=t}i.setAttribute("accept",r.toString())}s.append(i),T&&((o=document.createElement("button")).setAttribute("id",h+"_previewBt"),o.setAttribute("class","btn "+at+" btn-sm xsilk-input-text"),(l=document.createElement("i")).setAttribute("class",lt),l.setAttribute("aria-hidden","true"),o.append(l),""!=it&&o.append(" "+it),s.append(o)),U&&((o=document.createElement("button")).setAttribute("id",h+"_downloadBt"),o.setAttribute("class","btn "+ot+" btn-sm xsilk-input-text"),(l=document.createElement("i")).setAttribute("class",rt),l.setAttribute("aria-hidden","true"),o.append(l),""!=nt&&o.append(" "+nt),s.append(o))}else{(d=document.createElement("span")).setAttribute("class","silk-input-label silk-input-label-margin");var d,c=document.createElement("span"),a="form-control silk-input-text";""!=R&&(a+=" silk-input-text-scroll",c.setAttribute("style","height:"+R+";")),c.setAttribute("class",a),c.append(n),s.append(d),null!=t&&s.append(t),s.append(c)}s.append(e)}return"hidden"!=u&&""!=g&&"bottom"==M&&((t=document.createElement("div")).setAttribute("class","silk-input-description"),s.append(t)),s}var e,l,f,i,r,d,n,g=ifUndefined(t.description,""),M=ifUndefined(t.descriptionPlace,"top"),m=ifUndefined(t.width,""),b=ifUndefined(t.height,"200px"),R=ifUndefined(t.scrollHeight,""),v=ifUndefined(t.dataSource,""),q=ifUndefined(t.required,!1),H=ifUndefined(t.editable,!0),F=ifUndefined(t.visible,""),W=ifUndefined(t.hideEmpty,!1),o=ifUndefined(t.maxLength,""),w=ifUndefined(t.name,""),y=ifUndefined(t.scriptValue,""),z=ifUndefined(t.scope,1),k=ifUndefined(t.mask,""),s=ifUndefined(t.mode,!1),K=ifUndefined(t.placeholder,""),I=ifUndefined(t.form,void 0),J=ifUndefined(t.block,!1),Q=ifUndefined(t.cssClass,""),G=ifUndefined(t.inputClass,""),A=ifUndefined(t.valueColumn,""),C=ifUndefined(t.labelColumn,"label"),a=ifUndefined(t.linkedColumns,""),X=ifUndefined(t.template,""),c=ifUndefined(t.target,""),Y=ifUndefined(t.extraProperties,""),Z=ifUndefined(t.htmlConfigFile,"/ckeditor-conf/bar-simple.js"),L=ifUndefined(t.stringList,""),O=ifUndefined(t.prompt,""),tt=ifUndefined(t.promptValue,""),S=(ifUndefined(t.direction,"vertical"),ifUndefined(t.itemsDirection,"vertical")),et=ifUndefined(t.targetPage,""),T=(ifUndefined(t.sanitize,!0),ifUndefined(t.filePreview,!1)),U=ifUndefined(t.fileDownload,!1),it=ifUndefined(t.filePreviewLabel,"Preview"),nt=ifUndefined(t.fileDownloadLabel,"Download"),st=ifUndefined(t.fileUploadLabel,"Drag and drop file here, or click to select file."),at=ifUndefined(t.filePreviewClass,"btn-primary"),ot=ifUndefined(t.fileDownloadClass,"btn-primary"),lt=ifUndefined(t.filePreviewIcon,"fas fa-file"),rt=ifUndefined(t.fileDownloadIcon,"fas fa-file-download"),dt=ifUndefined(t.uploadURL,""),E=ifUndefined(t.fileTypeList,""),ct=ifUndefined(t.fileSizeLimit,""),ht=ifUndefined(t.timer,0),ut=null,pt=ifUndefined(t.toggleList,""),D=(this.getID=function(){return h},new EventManager),ft=(this.on=D.on,new ToggleManager(pt)),_=(this.$input,this.$dataField,this.$filePreviewBt=null,this.$fileDownloadBt=null,this.selectedIndex=0,!(this.codeEditor=void 0)),gt=!0,mt="email"==u?!0:!1,j=("emails"==u&&(u="email"),""),bt=(""!=v?(v=window[v],""==A&&(A=this.columnID)):A="value",this.focus=function(){f.focus()},this.openSelect=function(){f.openSelect()},this.getPreviousValue=function(){return j},this.setPreviousValue=function(t){j=t},this.getInputID=function(){return h+"_input"},this.getItem=function(t){if(""!=v&&-1!=this.set)return null==t?v.getItemAt(this.selectedIndex):v.getItemAt(this.selectedIndex,t)},this.getType=function(){return u},"label"!=C&&""!=C&&(""==a?a=C:-1==a.indexOf(C)&&(a=C+","+a)),this.getLinkedColumns=function(){return a.trim()},this.setScope=function(t){z=t},this.getScope=function(){return callFunction(z)},this.getRequired=function(){try{return callFunction(q)}catch(t){return!1}},this.getEditable=function(){try{return callFunction(H)}catch(t){return!1}},this.setEnable=function(t){null==t&&(t=!0),this.$input.find("input").prop("disabled",!t),_=!t},this.setDisable=function(t){null==t&&(t=!0),this.$input.find("input").prop("disabled",t),_=!t},this.getEnable=function(){return _},this.getDisable=function(){return!_},this.getVisible=function(){if(""!=F)try{gt=callFunction(F)}catch(t){gt=!1}return gt},this.setVisible=function(t){null==(t=W&&0==this.getMode()&&isEmpty(this.getValue())?!1:t)&&(t=this.getVisible()),this.$input.toggle(t),isNotEmpty(pt)&&ft.toggle(t,this.$input)},this.toggle=function(t){this.setVisible(t)},this.show=function(){this.setVisible(!0)},this.hide=function(){this.setVisible(!1)},this.setMask=function(t,e){f.mask(t,e)},this.setMode=function(t,e){if(t=bt(t),"hidden"!=u){if(s=null!=t&&t,null==e&&(e=!0),s=this.getEditable()?s:!1){if("checkbox"==u&&this.$input.css("pointer-events","auto"),e&&(j=this.getValue(),this.cleanClasses(),f.removeClass("silk-input-missing")),""==m)this.$input.css("max-width","100%");else{let t=m;-1<m.indexOf("%")&&(t=getNumber(m)-.3+"%"),this.$input.css("max-width",t)}this.$input.css("width","100%"),"file"==u?(T&&this.$filePreviewBt.toggle(""!=this.getValue()),U&&this.$fileDownloadBt.toggle(""!=this.getValue()),l.toggle(""!=this.getValue()),r.show(),d.hide(),d.find("div").css("width","0%")):isIn(u,"sql","js","css","xml","xhtml")?(l.show(),this.codeEditor.setReadOnly(!1)):(l.hide(),f.show()),"html"==u&&(CKEDITOR.instances[this.getInputID()]||(""!=Z?CKEDITOR.replace(this.getInputID(),{customConfig:window.contextPath+Z+"?unique"+(new Date).getTime(),height:replaceAll(b,"px","")}):CKEDITOR.replace(this.getInputID()),CKEDITOR.instances[this.getInputID()].on("change",$.proxy(function(t){D.dispatch("keyup",t,this)},this))),this.$input.find(".silk-input-value").hide())}else{if("checkbox"==u&&this.$input.css("pointer-events","none"),""==m?(this.$input.css("max-width","100%"),this.$input.css("width","100%")):(this.$input.css("width","auto"),this.$input.css("max-width","")),"html"==u&&CKEDITOR.instances[this.getInputID()]){CKEDITOR.instances[this.getInputID()].updateElement();try{CKEDITOR.instances[this.getInputID()].destroy()}catch(t){delete CKEDITOR.instances[this.getInputID()]}$("#cke_"+this.getInputID()).remove()}"file"==u?(T&&this.$filePreviewBt.toggle(""!=this.getValue()),U&&this.$fileDownloadBt.toggle(""!=this.getValue()),l.show(),r.hide(),d.hide()):isIn(u,"sql","js","css","xml","xhtml")?(l.show(),this.codeEditor.setReadOnly(!0)):(l.show(),f.hide())}this.setVisible(),i.toggle(s),D.dispatch("modeChange",s,l,f)}},this.getMode=function(){return s},function(e){if("number"==getObjectType(e))e=1==e;else if("string"==getObjectType(e))if(-1<"|true|edit|open|entry".indexOf(e))e=!0;else try{e=callFunction(e),"boolean"!=getObjectType(e)&&(e=!1)}catch(t){e=!1}return e}),B=(this.markRequired=function(){f.removeClass("silk-input-missing"),("file"!=u?f:r).addClass("silk-input-required")},this.markMissing=function(){f.removeClass("silk-input-required"),("file"!=u?f:r).addClass("silk-input-missing")},this.markValidationError=function(){f.removeClass("silk-input-required"),f.removeClass("silk-input-missing"),("file"!=u?f:r).addClass("silk-input-error")},this.cleanClasses=function(){("file"!=u?(f.removeClass("silk-input-missing"),f.removeClass("silk-input-error"),f):(r.removeClass("silk-input-missing"),r.removeClass("silk-input-error"),r)).removeClass("silk-input-required"),this.getRequired()&&("file"!=u?f:r).addClass("silk-input-required")},this.validate=function(){this.cleanClasses();var t,e=0;return this.getRequired()&&this.getVisible()&&(""==(""+(t=null==(t=this.getValue())?"":t)).trim()?(this.markMissing(),e=1):this.markRequired()),"checkbox"==u&&this.getRequired()&&0==this.getValue()&&(e=1),"date"!=u&&"datetime"!=u||(""==(t=this.getValue())?e=0:4!=t.indexOf("-")&&(this.markValidationError(),e=1)),"email"!=u||""==(t=this.getValue())||isEmail(t,mt)||(this.markMissing(),e=1),ifUndefined(D.dispatch("validation",u,this.getValue()),!0)||(this.markValidationError(),e=1),e},this.setValue=function(s){var a,o,i,t,e;null==(s=null==s?"":s)&&(s=""),"checkbox"==u?(s=getNumber(s),(e=document.createElement("span")).setAttribute("aria-hidden","true"),0==s?(f.prop("checked",!1),e.setAttribute("class","far fa-square")):(f.prop("checked",!0),e.setAttribute("class","far fa-check-square")),l.html(e)):"select"==u?(f.val(s),null!=f.val()?-1==(t=f.find("option:selected")).attr("recordIndex")?l.html("&nbsp;"):l.html(B(t.text())):(f.prop("selectedIndex",0),t=f.find("option:selected"),l.html("&nbsp;")),e=t.attr("recordIndex"),this.selectedIndex=null==e?f.prop("selectedIndex"):getNumber(e)):"options"==u?(","!=left(s,1)&&(s=","+s),","!=right(s,1)&&(s+=","),l.text(""),"vertical"==S?(a=document.createElement("ul")).setAttribute("style","margin:0px;padding-left:20px;"):a=document.createElement("div"),o=0,f.find("input").each(function(t,e){var i,n=-1<s.indexOf(","+$(e).val()+",");$(e).prop("checked",n),n&&("vertical"==S?(i=document.createElement("li")).append($(e).attr("label")):((i=document.createElement("span")).setAttribute("style","padding-right:10px;"),n=document.createTextNode("• "+$(e).attr("label")),i.append(n)),a.append(i),o++)}),0==o&&(a=document.createTextNode(" ")),l.append(a)):"radio"==u?(l.text(""),i="",f.find("input").each(function(t,e){$(e).val()==s?($(e).prop("checked",!0),i=$(e).attr("label")):$(e).prop("checked",!1)}),l.text(i)):"date"==u||"time"==u||"datetime"==u?""==s?(f.val(""),l.html("&nbsp;")):(f.datetimepicker("update",stringToDate(s)),l.html(B(f.val()))):"hidden"==u?f.val(s):"integer"==u?(f.val(s),""==s&&(s="0"),l.html(s)):"numeric"==u||"decimal"==u?0==(s=getNumber(s))?(f.val(""),l.html($.format.number(0,k.replace("D",""))),""!==k&&f.mask(k,{reverse:!0})):(f.val(s),""!==k&&f.mask(k,{reverse:!0}),l.html(B(f.val()))):"password"==u?(f.val(""),l.html("&nbsp;")):"html"==u?CKEDITOR.instances[this.getInputID()]?CKEDITOR.instances[this.getInputID()].setData(s):(f.val(s),""==s&&(s="&nbsp;"),l.html(s)):isIn(u,"sql","js","css","xml","xhtml")?(this.codeEditor.setCode(s),setTimeout($.proxy(function(){this.$input.find(".cm-scroller").scrollTop(0)},this),10)):"file"==u?(f.val(s),""==s&&(s="&nbsp;"),l.html(s)):(""==s?(f.val(""),l.html("&nbsp;"),""!==k&&f.mask(k)):(f.val(s),"code"==u?(t=f.val(),t=replaceAll(t,"&","&amp;"),t=replaceAll(t,"<","&lt;"),t=replaceAll(t,">","&gt;"),t=(t=replaceAll(t,"\t","&nbsp;&nbsp;&nbsp;&nbsp;")).replace(/\n/g,"<br />"),l.html(t)):(""!==k&&f.mask(k),e=f.val().replace(/\n/g,"<br />"),l.html(B(e)))),"button"==u&&j!=this.getValue()&&D.dispatch("change")),D.dispatch("setValue",s,f)},function(t){if(""!=X){var e=void 0;if(null==(e=null!=I?I.getSelectedItem():e)&&((e=new Object)[this.columnID]=t),""!=v){var i,n=v.getSelectedItem();for(i in n)null==e[i]&&(e[i]=n[i])}t=getTemplateData(X,0,e)}return t}),P=(this.getValue=function(){var i,e=D.dispatch("getValue",f);if(null!=e)return e;if("checkbox"==u)return f.prop("checked")?1:0;if("select"==u)return f.val();if("options"==u)return i=",",f.find("input").each(function(t,e){$(e).prop("checked")&&(i+=$(e).val()+",")}),i=","==i?"":i;if("radio"==u)return i="",i=null==(i=f.find("input[name="+h+"]:checked").val())?"":i;if("date"==u||"time"==u||"datetime"==u)return""==f.val()?"":dateToString(f.datetimepicker("getDate"));if("integer"==u||"numeric"==u||"decimal"==u)return getNumber(f.val());if("html"==u)return CKEDITOR.instances[this.getInputID()]?CKEDITOR.instances[this.getInputID()].getData():f.val();if(isIn(u,"sql","js","css","xml","xhtml"))return this.codeEditor.getCode();if(""==y)return f.val();e="";try{e=callFunction(y)}catch(t){e=y}return e},this.getText=function(){return l.html()},this.getLabel=function(){return e.html()},this.setLabel=function(t){e.text(t)},this.hasChanged=function(){if(!this.getEditable())return!1;if(!this.getVisible())return!1;if(""!=y)return!0;if("select"==u){if(-1==this.selectedIndex&&""==tt)return!1;if(null!=I&&"insert"==I.getAction())return!0}return"date"==u&&""!=j&&j.length<11&&(j+=" 00:00:00.000"),j!=this.getValue()},this.load=function(){var t=!0,e=this.getValue();if(f.text(""),""==v&&console.log(h+": No dataSource provided"),"select"==u){""!==O&&((n=document.createElement("option")).setAttribute("value",tt),n.setAttribute("recordIndex",-1),n.append(O),f.append(n));for(var i=0;i<v.length();i++){var n,s=v.getItemAt(i);(t=null==(t=D.dispatch("filterLoad",s))?!0:t)&&(o=s[A],l=s[C],(n=document.createElement("option")).setAttribute("value",o),n.setAttribute("recordIndex",i),e==o&&n.setAttribute("selected",""),n.append(l),f.append(n))}var a=f.find("option:selected").attr("recordIndex");this.selectedIndex=null==a?f.prop("selectedIndex"):getNumber(a)}if("options"==u)for(i=0;i<v.length();i++){s=v.getItemAt(i);(t=null==(t=D.dispatch("filterLoad",s))?!0:t)&&(o=s[A],l=s[C],r=document.createElement("label"),(d=document.createElement("input")).setAttribute("type","checkbox"),d.setAttribute("value",o),d.setAttribute("label",l),(c=document.createElement("span")).innerHTML=l,r.append(d),r.append(c),f.append(r),"vertical"==S?f.append("<br>"):f.append("<span> &nbsp; </span>"))}if("radio"==u)for(i=0;i<v.length();i++){var o,l,r,d,c,s=v.getItemAt(i);(t=null==(t=D.dispatch("filterLoad",s))?!0:t)&&(o=s[A],l=s[C],r=document.createElement("label"),(d=document.createElement("input")).setAttribute("name",h),d.setAttribute("type","radio"),d.setAttribute("label",l),d.setAttribute("value",o),(c=document.createElement("span")).innerHTML=l,r.append(d),r.append(c),f.append(r),"vertical"==S?f.append("<br>"):f.append("<span> &nbsp; </span>"))}D.dispatch("afterLoad"),null!=I&&null!=I[this.columnID]&&(this.setValue(I[this.columnID].getValue()),this.setMode())},function(t,e){if(t.setAttribute("class","form-control silk-input-value silk-input-type-"+u+" "+Q),t.setAttribute("style","display: none;"+e),""!=K&&t.setAttribute("placeholder",K),""!=o&&t.setAttribute("maxLength",o),""!=w&&t.setAttribute("name",w),""!=Y){var i,n=Y.trim();for(i in n=replaceAll(n,"  "," ").split(" ")){var s=n[i].split("="),a=s[0],s=1==s.length?a:replaceAll(s[1],"'","");t.setAttribute(a,s)}}}),vt=(this.setStringList=function(t){null!=t&&(L=t);var e="";if(""!=L){try{e=JSON.parse(L)}catch(t){return console.log(t),void f.text("")}"select"==u&&""!==O&&((n=document.createElement("option")).setAttribute("value",tt),n.setAttribute("recordIndex",-1),n.append(O),f.append(n));for(var i=0;i<e.length;i++){var n,s,a,o=e[i];"select"==u&&((n=document.createElement("option")).setAttribute("value",o.value),n.setAttribute("recordIndex",i),n.append(o.label),f.append(n)),"options"==u&&(s=document.createElement("label"),(a=document.createElement("input")).setAttribute("type","checkbox"),a.setAttribute("value",o.value),a.setAttribute("label",o.label),a.setAttribute("style","margin:8px 5px 2px 0px;"),s.append(a),s.append(o.label),f.append(s),"vertical"==S?f.append("<br>"):f.append("<span> &nbsp; </span>")),"radio"==u&&(s=document.createElement("label"),(a=document.createElement("input")).setAttribute("name",h),a.setAttribute("type","radio"),a.setAttribute("value",o.value),a.setAttribute("label",o.label),a.setAttribute("style","margin:8px 5px 2px 0px;"),s.append(a),s.append(o.label),f.append(s),"vertical"==S?f.append("<br>"):f.append("<span> &nbsp; </span>"))}}},function(t,n){if(""!=dt){t=t[0];let i=t.name;var s,e=t.size,a=!1,o=(""!=E&&0<(o=i.lastIndexOf(".")+1)&&(o=i.substring(o),E.includes(o)||(a=!0)),!1);""!=ct&&1048576*getNumber(ct)<e&&(o=!0),a||o?(n.markValidationError(),D.dispatch("fileValidate",n,a,o)):((a=new FormData).append(n.columnID,t),!ifUndefined(D.dispatch("beforeUpload",n,a,i,e),!0)&&0==(result=null==result||result)||(r.hide(),l.hide(),d.show(),(s=new XMLHttpRequest).upload.onprogress=function(t){t.lengthComputable&&(t=getNumber(t.loaded/t.total*100,0),d.find("div").css("width",t+"%"))},s.onreadystatechange=function(t){if(4==s.readyState&&200==s.status){var e=null;try{null!=(e=JSON.parse(s.responseText)).fileName&&(i=e.fileName)}catch(t){e=s.responseText}n.setValue(i),n.setPreviousValue(""),n.cleanClasses(),l.show(),r.show(),d.hide(),D.dispatch("afterUpload",n,!0,e)}else 4==s.readyState&&200!=s.status&&(console.log("Silk - Error during field "+n.columnID+" upload."),D.dispatch("afterUpload",n,!1,s));d.find("div").css("width","0%")},s.open("POST",dt,!0),s.send(a)))}});this.initInput=function(){""==c?($("#"+h).replaceWith(V()),J&&$("#"+h).after("<br>")):($("#"+c).append(V()),J&&$("#"+c).append("<br>")),this.$input=$("#"+h),this.$dataField=this.$input.find(".silk-input-value"),e=this.$input.find(".silk-input-label"),l=this.$input.find(".silk-input-text"),f=this.$input.find(".silk-input-value"),i=this.$input.find(".silk-input-description"),"hidden"!=u&&""!=p&&e.html(p.replaceAll("</p>","<br/></p>").replace(/<[\/]{0,1}(p)[^><]*>/gi,"")),"hidden"!=u&&""!=g&&i.html(g),"hidden"==u&&(f=this.$input),"numeric"!=u&&"integer"!=u&&"decimal"!=u||f.css("text-align","right"),"html"==u&&l.addClass("silk-input-text-html"),l.hasClass("form-control")&&l.css("display","block"),""!==o&&f.keydown($.proxy(function(t){this.getValue().length>getNumber(o)-1&&t.preventDefault()},this)),f.attr("name",h),f.keyup($.proxy(function(t){var e=f.val();""==e||null==e?(l.html("&nbsp;"),this.cleanClasses()):(this.validate(),l.text(e)),null!=I&&(I.setInputMode(!0,!1),I.dispatchOnChange(this)),D.dispatch("keyup",t,this),f.removeClass("silk-input-error"),0<ht&&(clearTimeout(ut),ut=setTimeout($.proxy(function(){D.dispatch("timer",this.getValue(),this)},this),ht))},this)),f.keydown($.proxy(function(t){var e=D.dispatch("keydown",t,this);if(0==(e=null==e?!0:e))return t.preventDefault(),!1},this)),"date"!=u&&"time"!=u&&"datetime"!=u||("date"==u&&f.datetimepicker({format:"mm/dd/yyyy",minView:2,fontAwesome:!0,autoclose:!0}),"time"==u&&f.datetimepicker({format:"H:ii P",startView:1,minView:0,maxView:1,showMeridian:!0,todayBtn:!1,fontAwesome:!0,formatViewType:"time",autoclose:!0}),"datetime"==u&&f.datetimepicker({format:"mm/dd/yyyy H:ii P",startView:2,minView:0,maxView:4,showMeridian:!0,fontAwesome:!0,autoclose:!0}),f.on("changeDate",function(t){f.val($(this).val()),l.text($(this).val())})),"select"==u&&""==v&&this.setStringList(),"options"==u&&""==v&&this.setStringList(),"radio"==u&&""==v&&this.setStringList(),"button"==u&&f.on("click",$.proxy(function(){this.getMode()&&(D.dispatch("click",this),""!=et)&&window[et].show()},this)),"code"==u&&f.on("keydown",function(t){var e;"Tab"==t.key&&(t.preventDefault(),t=this.selectionStart,e=this.selectionEnd,this.value=this.value.substring(0,t)+"\t"+this.value.substring(e),this.selectionStart=this.selectionEnd=t+1)}),"sql"==u&&(this.codeEditor=new SqlEditor(h+"_code"),this.codeEditor.setReadOnly(!0)),"js"==u&&(this.codeEditor=new JSEditor(h+"_code"),this.codeEditor.setReadOnly(!0)),"css"==u&&(this.codeEditor=new CssEditor(h+"_code"),this.codeEditor.setReadOnly(!0)),"xml"==u&&(this.codeEditor=new XmlEditor(h+"_code"),this.codeEditor.setReadOnly(!0)),"xhtml"==u&&(this.codeEditor=new HtmlEditor(h+"_code"),this.codeEditor.setReadOnly(!0)),"file"==u&&(r=this.$input.find(".silk-input-drop"),d=this.$input.find(".silk-input-progress"),n=this.$input.find(".silk-input-browse"),T&&(this.$filePreviewBt=$("#"+h+"_previewBt")),U&&(this.$fileDownloadBt=$("#"+h+"_downloadBt")),r.on("click dragenter dragover dragleave drop",function(t){t.preventDefault(),t.stopPropagation()}),r.on("click",function(){n.val(""),n.trigger("click")}),r.on("drop",$.proxy(function(t){var t=t.originalEvent,e=this;t=t.dataTransfer.files,vt(t,e)},this)),n.change($.proxy(function(t){vt(t.currentTarget.files,this)},this)),T&&this.$filePreviewBt.on("click",$.proxy(function(){D.dispatch("clickPreview")},this)),U)&&this.$fileDownloadBt.on("click",$.proxy(function(){D.dispatch("clickDownload")},this)),f.change($.proxy(function(){var t=f.find("option:selected").attr("recordIndex");this.selectedIndex=null==t?f.prop("selectedIndex"):getNumber(t),D.dispatch("change"),null!=I&&(I.setInputMode(!0,!1),I.dispatchOnChange(this))},this)),null!=N?this.setValue(N):this.setValue(""),D.dispatch("afterInit",this),this.setMode(s)},""!=c&&this.initInput()},LogicGrid=function(id){this.className="LogicGrid",this.id=id;var actionArray=[],options={},debug=!1;this.setOptions=function(t){options=t},this.getOptions=function(){return options},this.setDebug=function(t){debug=t},this.addAction=function(t,e){var i={};i.element=t,i.criteria=e,actionArray.push(i)},this.getStatus=function(){debug&&0<arguments.length&&console.log("parameters: ",arguments);let criteria=arguments[0];if(null==criteria)return!1;if("string"!=typeof criteria)return!1;if(""==criteria)return!1;criteria=criteria.replaceAll(" ","");let status=!0,negation=!1,criteriaArray=criteria.trim().split(",");for(x in criteriaArray){status=!0;let partArray=criteriaArray[x].split(":");for(y in partArray){y=getNumber(y);let queryKey=partArray[y];if(debug&&console.log("Value searched: "+queryKey),-1<queryKey.indexOf("!")&&(debug&&console.log("Negation activated"),negation=!0,queryKey=queryKey.replace("!","")),"*"==queryKey)debug&&console.log("Accept any value"),status=status&&!0,negation=!1;else{let gridGroup=options.gridLabels[y],gridDP=(debug&&console.log("Search group:"+gridGroup),options[gridGroup+"DP"]),gridKey=(debug&&console.log("DP:",gridDP),options[gridGroup+"Key"]),gridItem=(debug&&console.log("DP search key:"+gridKey),gridDP.getIndexItemOf(gridKey,queryKey));if(null==gridItem)debug&&console.log("Value not found in DP"),status=!1,negation=!1;else{let gridValue=gridItem[gridDP.getPkColumn()];if(null==gridValue)debug&&console.log("PK column does not exist"),status=!1,negation=!1;else{debug&&console.log("ID value found: "+gridValue);let queryValue=null,queryStatus=(y+1<arguments.length&&(queryValue=arguments[y+1],debug)&&console.log("Selected value from parameter "+(y+1)+" : "+queryValue),null==queryValue&&(queryValue=eval(options.gridElements[y]),debug)&&console.log("Selected value: "+queryValue),gridValue==queryValue);debug&&console.log("Logic status: "+queryStatus),negation&&(queryStatus=!queryStatus,negation=!1,debug)&&console.log("Negation change status: "+queryStatus),status=status&&queryStatus,debug&&(console.log("Group status: "+status),console.log("- - - - - - - - - - - - - - -"))}}}}if(status)break}return status},this.getActions=function(){return actionArray},this.run=function(){for(x in actionArray){var t=actionArray[x],e=this.getStatus(t.criteria);"function"==typeof t.element&&t.element(e),"object"==typeof t.element&&t.element.toggle(e)}}},Modal=function(t){this.$modal=void 0,this.$header=void 0,this.$body=void 0,this.$footer=void 0;var n=new EventManager,s=(this.on=n.on,this.show=function(t,e,i){ifUndefined(n.dispatch("beforeShow"),!0)&&(null!=t&&(this.$modal.children().first().removeAttr("class"),this.$modal.find(".modal-content").css("top",e+"px"),this.$modal.find(".modal-content").css("left",t+"px"),null!=i)&&this.$modal.find(".modal-content").css("width",i+"px"),s.show())},this.hide=function(){s.hide()},this.open=function(){this.show()},this.close=function(){this.hide()},this.setTitle=function(t){this.$modal.find(".modal-title").text(t)},this.getTitle=function(){this.$modal.find(".modal-title").html()},this.setBody=function(t){this.$modal.find(".modal-body").html(t)},this.$page=void 0,this.mask=function(){},this.goBack=function(){this.$modal.modal("hide")},null);this.initModal=function(){this.$modal=$("#"+t),this.$page=this.$modal,this.$header=this.$modal.find(".modal-header"),this.$body=this.$modal.find(".modal-body"),this.$footer=this.$modal.find(".modal-footer"),s=new bootstrap.Modal(document.getElementById(t)),$("#"+t+"_closeBt").on("click",$.proxy(function(){ifUndefined(n.dispatch("beforeClose"),!0)&&this.close()},this)),this.$modal.on("shown.bs.modal",$.proxy(function(t){n.dispatch("afterShow"),n.dispatch("show")},this)),this.$modal.on("hidden.bs.modal",$.proxy(function(t){n.dispatch("afterClose"),n.dispatch("close")},this)),0<$("#"+t+" .silk-help").length?$("#"+t+" .silk-head-help").show():$("#"+t+" .silk-head-help").remove()},this.resize=function(){}},NullObject=function(){this.getID=function(){return""},this.on=function(){},this.toggle=function(){},this.show=function(){},this.hide=function(){},this.close=function(){},this.open=function(){},this.load=function(){},this.disable=function(){},this.enable=function(){},this.hasChange=function(){return!1},this.getValue=function(){return""},this.setValue=function(){},this.getEditable=function(){},this.getInputID=function(){},this.getMode=function(){return!1},this.setMode=function(){},this.required=function(){return!1},this.getVisible=function(){return!1},(this.$button=this).$page=$("")},Page=function(e,t,i,n,s,a){this.id=e,this.$page=null,this.$content=null,this.stage=t,this.width=i,this.layout=n.split("|"),this.masked=!1,this.index=-1,this.$backButton=null,this.isSingle=!1,this.headerWidth=0,this.tabsNav=a;var c=new EventManager;this.on=function(t,e){c.on(t,e)},this.getID=function(){return this.id},this.resize=function(){var t,e,i,n,s,a,o;"BODY"==$(".screen").parent().prop("tagName")?(t=$(".screen").parent().innerHeight(),e=ifUndefined($(".silk-screen-header").outerHeight(),0),i=ifUndefined($(".silk-screen-footer").outerHeight(),0),n=this.$page.find(".silk-head").outerHeight(),s=getNumber(this.$content.css("padding-top"))+getNumber(this.$content.css("padding-bottom")),a=getNumber(this.$content.css("margin-top"))+getNumber(this.$content.css("margin-bottom")),o=getNumber(this.$content.css("border-top-width"))+getNumber(this.$content.css("border-bottom-width")),this.$content.height(t-n-e-i-s-a-o)):this.$content.css("height",""),"null"!=this.tabsNav&&(window[this.tabsNav].activePage==this.id&&0!=this.$page.find(".silk-navbar").length&&(window[this.tabsNav].$tabs.width(1),this.headerWidth=0,this.$page.find(".silk-navbar").children().each($.proxy(function(t,e){e=$(e);e.hasClass("btn")&&(this.headerWidth+=e.width())},this)),window[this.tabsNav].$tabs.width(this.$page.find(".silk-navbar").width()-this.headerWidth-10),window[this.tabsNav].relocateTab()),window[this.tabsNav].setBarWidth())},this.show=function(){silk.focusedPage=this.id;var t=this.layout[silk.getScreenMode()].split(","),e=new Array,i=new Array,n=new Array,s=(t.forEach(function(t){t=(t+"::").split(":");e.push(callFunction(t[0])),i.push(callFunction(t[1])),n.push(callFunction(t[2]))}),new Array);for(r in silk.pageList){var a=silk.pageList[r],o=e.indexOf(silk.pageList[r].stage),l=(a.$page.removeClass("silk-page-border"),silk.pageList[r].tabsNav);"null"!=l&&"null"==this.tabsNav&&(a.id==window[l].activePage?-1==o&&(o=e.indexOf(window[window[l].pageList[0].pageName].stage)):o=-1),-1<o?(a.$page.show(),a.$page.attr("width",i[o]),"b"==n[o]?a.$backButton.show():a.$backButton.hide(),s.push(r)):a.$page.hide()}for(var r=0;r<s.length-1;r++){var d=silk.pageList[s[r]];d.$page.addClass("silk-page-border"),d.resize()}this.isSingle=1==s.length,c.dispatch("show"),this.resize(),"null"!=this.tabsNav&&0!=this.$page.find(".silk-navbar").length&&(this.$page.find(".silk-navbar").append(window[this.tabsNav].$tabs),window[this.tabsNav].setActive(this.id)),this.$page.find(".silk-table").each(function(){var t=$(this).attr("id");window[t].syncHeader()})},this.mask=function(t){this.masked=null==t?!this.masked:t,setTimeout($.proxy(function(){this.maskProcess()},this),300)},this.maskProcess=function(){var t;silk.transitioning?setTimeout($.proxy(function(){this.maskProcess()},this),100):this.masked?(10<this.$page.position().left?($("#coverLeft").width(this.$page.position().left),$("#coverLeft").fadeIn(200)):$("#coverLeft").fadeOut(200),(t=this.$page.position().left+this.$page.width())+10<silk.$screen.width()?($("#coverRight").width(silk.$screen.width()-t),$("#coverRight").css("left",t),$("#coverRight").fadeIn(200)):$("#coverRight").fadeOut(200)):($("#coverLeft").fadeOut(200),$("#coverRight").fadeOut(200))},this.goBack=function(){"null"==s?0<this.index&&silk.pageList[this.index-1].show():window[s].show()},this.setTitle=function(t){this.$page.find(".silk-navbar-title").text(t)},this.getTitle=function(){return this.$page.find(".silk-navbar-title").html()},this.getVisible=function(){return!("none"==this.$page.css("display"))},this.initPage=function(){var t;this.$page=$("#"+this.id),this.$content=this.$page.find(".silk-content"),this.$backButton=$("#"+(e+"_backBt")),this.$backButton.click($.proxy(function(){this.goBack()},this)),0<$("#"+e+" .silk-help").length?$("#"+e+" .silk-head-help").show():$("#"+e+" .silk-head-help").remove(),"null"!=this.tabsNav&&0!=this.$page.find(".silk-navbar-title").length&&(t=this.$page.find(".silk-navbar-title").html().trim(),console.lo,this.$page.find(".silk-navbar-title").empty(),window[this.tabsNav].addPage(this.id,t))}},Pagination=function(t,e,i,n){this.id=t,this.$pagination,this.currentPage=0,this.totalRows=0,this.totalPages=0,this.pageStartRow=0,this.pageSize=e,this.showPages=i,this.groupSelected=0,this.groupTotal=0,this.$leftArrow,this.$rightArrow,this.leftLimit=0,this.rightLimit=0;var s=new EventManager;this.on=s.on,null==n&&(n="Records"),this.clean=function(){this.pageStartRow=0,this.$pagination.html("")},this.load=function(t,e){if(this.clean(),0!=t){this.totalRows=t,this.totalPages=e;var e=getFormattedValue(t,"numeric"),i="";for("none"!=n&&(i+="<li class='page-item disable'><span class='page-link'  >"+e+" "+n+"</span></li>"),i+="<li class='page-item left-arrow' style='display:none;'><span class='page-link'>&#9664;</span></li>",x=0;x<this.totalPages;x++)i+="<li class='page-item "+(0==x?"active":"")+"' style='display:none;' ><a href='#' data-pageStartRow='"+this.pageSize*x+"' data-index='"+x+"' class='page-link' >"+(x+1)+"</a></li>";this.$pagination.html(i+="<li class='page-item right-arrow'  style='display:none;' ><span class='page-link'  >&#9654;</span></li>"),this.$leftArrow=this.$pagination.find(".left-arrow"),this.$rightArrow=this.$pagination.find(".right-arrow"),this.groupSelected=0,this.groupTotal=Math.ceil(this.totalPages/this.showPages),this.activateItems(0)}},this.activateItems=function(){this.$leftArrow.toggle(0<this.groupSelected),this.$rightArrow.toggle(this.groupSelected<this.groupTotal-1),this.leftLimit=this.groupSelected*this.showPages,this.rightLimit=this.groupSelected*this.showPages+this.showPages,this.$pagination.find("a").each($.proxy(function(t,e){$(e).parent().toggle(t>=this.leftLimit&&t<this.rightLimit)},this))},this.initPagination=function(){this.$pagination=$("#"+this.id),this.$pagination.on("click","a",$.proxy(function(t){t=$(t.currentTarget);t.parent().hasClass("active")||(this.pageStartRow=getNumber(t.attr("data-pageStartRow")),this.currentPage=getNumber(t.attr("data-index")),this.$pagination.find("li").removeClass("active"),t.parent().addClass("active"),s.dispatch("click"))},this)),this.$pagination.on("click",".left-arrow",$.proxy(function(t){this.groupSelected<=0||(this.groupSelected--,this.activateItems(this.groupSelected))},this)),this.$pagination.on("click",".right-arrow",$.proxy(function(t){this.groupSelected>=this.groupTotal||(this.groupSelected++,this.activateItems(this.groupSelected))},this))}},Pulse=function(i,t){this.initTime=new Date,this.active=!0;var n=this.debug=!1,s=document.title,a=0,e=(this.getURL=function(){return i+" "+t},this.reset=function(){this.debug&&console.log("reset"),this.initTime=new Date,localStorage.setItem("__pulseInitTime",this.initTime.getTime()),document.title=s},this.restart=function(){this.active=!0,n=!1,this.reset()},this.testTimeout=function(){var t=new Date;localStorage.setItem("__pulseInitTime",t.getTime()-84e4)},this.beat=function(){var t=localStorage.getItem("__pulseInitTime");this.initTime=null==t?new Date:new Date(getNumber(t));var t=new Date-this.initTime,t=Math.round(t%864e5%36e5/6e4),e="beat";this.active&&(15<t?(this.active=!1,this.openDialog()):(this.debug&&console.log("idle:"+t+" min."),document.title=t<1?s:"⏰"+t+"m. "+s)),n&&160015<t&&(e="disable"),$.ajax({context:this,url:i,data:{mode:e},type:"POST",error:function(){this.debug&&console.log("<p>An error has occurred</p>"),navigator.onLine?this.close():silk.alert("No Internet Detected","Check your internet connectivity before continuing using the application.","error")},dataType:"text",success:function(t){this.debug&&console.log("beat:"+t+" - "+e),"0"!=t&&this.close()}})},this.close=function(){window.location.href=t},this.openDialog=function(){n=!0;let t;silk.alert({icon:"warning",title:"Inactivity Warning",html:"The Application will close in <b>2:00</b> minutes.",confirmButtonText:"Continue Working",timer:12e4,allowOutsideClick:!1,timerProgressBar:!0,didOpen:function(){let i=Swal.getHtmlContainer().querySelector("b");t=setInterval(function(){var t=Swal.getTimerLeft(),e=Math.floor(t/6e4),t=(t%6e4/1e3).toFixed(0),e=60==t?e+1+":00":e+":"+(t<10?"0":"")+t;i.textContent=e,a=0==a?(document.title="🔴 "+s,1):(document.title="🟣️ "+s,0)},1e3)},willClose:function(){clearInterval(t)}}).then(function(t){t.dismiss===Swal.DismissReason.timer?e.close():e.restart()})},this.initPulse=function(){this.debug&&console.log("started"),this.reset()},this)},RequestObject=function(){this.langID="",this.debugLevel="0",this.parameterList=new Array,this.operationList=new Array,this.serviceURL="";var s=-1;this.setParameter=function(t,e,n,s){for(i in null==n&&("number"==getObjectType(e)&&(n=-1<(""+e).indexOf(".")?"N":"I"),"string"==getObjectType(e)&&(n="S"),"date"==getObjectType(e))&&(n="D"),this.parameterList)if(this.parameterList[i].column==t)return this.parameterList[i].value=""+e,this.parameterList[i].type=n,void(this.parameterList[i].secure=s);var a=new Object;a.column=t,a.value=""+e,a.type=n,a.secure=s,this.parameterList.push(a)},this.cleanParameters=function(){this.parameterList.length=0},this.setOperationAction=function(t,e){var i=this.operationList.push(new OperationItem);s=i-1,this.operationList[s].action=t,this.operationList[s].operation=null==e?"select"==t?"default":t:e},this.setSingleOperationAction=function(t,e){this.operationList.splice(1),s=0,this.operationList[0].action=t,this.operationList[0].operation=null==e?"select"==t?"default":t:e},this.setOperationItem=function(t,e){if(0<this.operationList.length){for(i in this.operationList[s].columnList)if(this.operationList[s].columnList[i].column==t)return void(this.operationList[s].columnList[i].value=""+e)}else this.operationList.push(new OperationItem),s=0;var n=new Object;n.column=t,n.value=""+e,this.operationList[s].columnList.push(n)},this.getOperationItem=function(t){return this.operationList[t]},this.getOperationColumnItemValue=function(t){for(i in this.operationList[s].columnList)if(this.operationList[s].columnList[i].column==t)return this.operationList[s].columnList[i].value;return""},this.cleanOperations=function(){s=-1,this.operationList=new Array},this.getJSONString=function(){return 0==this.operationList.lenght&&this.setOperationAction("select"),JSON.stringify(this)}},ReturnObject=function(){this.data=new Array},OperationItem=function(){this.action="",this.operation="",this.columnList=new Array,this.setItem=function(t,e){for(i in this.columnList)if(this.columnList[i].column==t)return void(this.columnList[i].value=e);var n=new Object;n.column=t,n.value=e,this.columnList.push(n)},this.getItemValue=function(t){for(i in this.columnList)if(this.columnList[i].column==t)return value}},Silk=function(){this.pageList=[],this.focusedPage,this.$screen=$(".screen"),this.dpLoader=[],this.transitioning=!1,this.preLoaderAutoFade=!0;var a=new EventManager,o=(this.on=a.on,this.getScreenMode=function(){var t=$(".screen").parent().innerWidth();return t<544?0:t<=768?1:t<=1024?2:t<=1400?3:t<=1900?4:5},this.alert=function(i,n,s){return new Promise((e,t)=>{"string"==typeof i||i instanceof String?null==s?null==n?o.fire(i,"","info"):o.fire(i,n):o.fire(i,n,s):o.fire(i).then(function(t){e(t)})})},Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},reverseButtons:!0,buttonsStyling:!1})),n=(this.toast=function(t,e,i){"string"==typeof t||t instanceof String?null==i?null==e?n.fire(t,"","info"):n.fire(t,"",e):n.fire(t,e,i):n.fire(t)},Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0}));this.layoutScreens=function(){for(var t in this.pageList)this.pageList[t].resize(),0==t&&window[this.focusedPage].show();a.dispatch("resize")},this.confirmation=function(e,i,t,n,s,a){this.alert({title:t=null==t?"Continue?":t,text:n,icon:a=null==a?"question":a,animation:!1,showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:s=null==s?"OK":s}).then(function(t){t.isConfirmed&&(e instanceof Function?e(i):e instanceof Button&&e.click())})},this.toggleHelp=function(t){let e=null!=t?"#"+t+" ":"";$(e+".silk-help").fadeToggle()},this.initSilk=function(){0<this.$screen.length&&($("html").addClass("silk-html"),$("body").addClass("silk-html")),$("#coverLeft").hide(),$("#coverRight").hide(),$("#coverLeft").hide(),$("#coverRight").hide(),$(".silk-page").each(function(t){var e=$(this).attr("id");window[e].index=t,silk.pageList.push(window[e])}),0<this.pageList.length&&(this.focusedPage=this.pageList[0].id),$(window).resize(function(){silk.layoutScreens()})},this.addDPtoLoader=function(t){if("dataProvider"!=window[t.dataProvider].className)throw new Error("The object ["+t.dataProvider+"] is not a DataProvider.");this.dpLoader.push(t)},this.load=function(){this.layoutScreens(),a.dispatch("beforeDPLoad"),this.dpLoader.sort(function(t,e){return t.order>e.order?1:-1});var t=-1;for(x in this.dpLoader)this.dpLoader[x].order!=t&&t++,this.dpLoader[x].order=t;var n=setInterval(function(){for(x in silk.dpLoader){var t=silk.dpLoader[x].dataProvider,e=silk.dpLoader[x].order;0==silk.dpLoader[x].status&&0==s(e-1)&&window[t].load()}var i=0;for(x in silk.dpLoader)silk.dpLoader[x].status<2&&i++;0==i&&(clearInterval(n),a.dispatch("afterDPLoad"),silk.preLoaderAutoFade)&&$(".preloader").fadeOut("fast")},5),s=function(t){if(t<0)return 0;var e=0;for(x in silk.dpLoader){var i=silk.dpLoader[x];i.order==t&&i.status<2&&e++}return e};$(".silk-home-button").on("click",function(){window.location.href=contextPath}),$(".silk-logout-button").on("click",function(t){let e="Logout Application";var i=$(this);"BUTTON"==i[0].tagName&&(i=i.attr("id"))&&window[i]&&(window[i].getConfirmTitle()&&(e=window[i].getConfirmTitle()),window[i].getConfirmMessage()&&(e=window[i].getConfirmMessage()),window[i].getConfirmLabel())&&(e=window[i].getConfirmLabel()),t.preventDefault(),silk.alert({title:e,text:"Do you want to exit the application?",icon:"question",animation:!1,showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Yes, logout."}).then(function(t){t.isConfirmed&&(window.location.href=contextPath+"/auth/webLogout")})}),setTimeout(function(){$(".preloader").fadeOut("fast")},1e4)},0==getNumber(ifUndefined(Cookies.get("silkLocalHelp"),"0"))&&0<$(".silk-help").length&&this.alert({title:"How to get some help",html:"<p>Click on the <i class='fas fa-question-circle'></i> icon located beside the header's title to display the provided help boxes.</p><p align='center'><input id='silkHelpCheckbox' type='checkbox' /> Don't show me this notice again.</p>",icon:"info",didClose:function(){$("#silkHelpCheckbox").prop("checked")&&Cookies.set("silkLocalHelp","1",{path:window.location.pathname})}})},Tab=function(i,t){var s=new Array,a=(this.index=-1,this.$tab,this.$content,!0),o=new EventManager;this.on=o.on,this.show=function(){this.$tab.show()},this.hide=function(){this.$tab.hide()},this.toggle=function(t){null==t?this.$tab.toggle():this.$tab.toggle(t)},this.getTabs=function(t){return null==t?s:s[t]},this.size=function(){return s.length},this.setIndex=function(t,e){!1===e&&(a=!1),null==t&&(t=this.index),s[t].$tab.trigger("click"),this.index=t},this.getSelectedTab=function(){return s[this.index]},this.indexOf=function(t){for(var e in s)if(s[e].id==t)return e;return-1},this.getActive=function(t){return-1!=(t=this.getTabIndex(t))&&s[t].$tab.hasClass("active")},this.getVisible=function(t){return-1!=(t=this.getTabIndex(t))&&s[t].$tab.is(":visible")},this.showTab=function(t){this.toggleTab(t,!0)},this.hideTab=function(t){this.toggleTab(t,!1)},this.toggleTab=function(t,e){-1!=(t=this.getTabIndex(t))&&(null==e?s[t].$tab.toggle():s[t].$tab.toggle(e))},this.getTabIndex=function(t){var e;return null==t?t=this.index:isNumeric(t)?t>s.length-1&&(t=-1):(e=t,-1==(t=this.indexOf(e))&&console.log(i+": No tab "+e+" ID found.")),getNumber(t)},this.addTab=function(t,e,i,n){null!=e&&(this.$tab.append("<button id='"+t+"_tab' class='nav-item nav-link silk-nav-link ' data-bs-toggle='tab' data-bs-target='#"+t+"' type='button' role='tab' aria-controls='"+t+"' aria-selected='' >"+e+"</button>"),e="<div id='"+t+"' class='tab-pane silk-tab-pane fade ' role='tabpanel' aria-labelledby='"+t+"_tab'>"+(i=null==i?"":i)+"</div>",this.$content.append(e));i=new Object,i.id=t,i.$tab=$("#"+t+"_tab"),i.$content=$("#"+t),s.push(i),e=s.length-1;return(n=null==n)&&(this.index=e,this.setIndex(e)),o.dispatch("add",e),e},this.removeTab=function(t){s[t].$tab.remove(),s[t].$content.remove(),s.splice(t,1),o.dispatch("removed",t),0==t?0<s.length?(this.index=0,this.setIndex()):this.index=-1:(this.index=t-1,this.setIndex())},this.initTab=function(){this.$tab=$("#"+i),this.$content=$("#"+i+"_content"),this.$tab.on("click",$.proxy(function(t){let e=$(t.target);if(!e.hasClass("close-icon")&&null!=(e="tab"!=e.attr("role")?e.parent():e).attr("id")){var i=e.attr("id").replace("_tab","");for(x in s)if(s[x].id==i){this.index=getNumber(x);break}var n=this.getTabs()[this.index].id;a?o.dispatch("click",this.index,n,t.target):a=!0}},this)),0<this.$tab.find("button").length&&(this.index=0)}},Table=function(g,t){this.className="table";var n,p,f,m,b=ifUndefined(t.dataSource,""),v=ifUndefined(t.autoSelect,!0),u=ifUndefined(t.targetPage,""),s=ifUndefined(t.header,"fixed"),w=ifUndefined(t.treeData,void 0),k=ifUndefined(t.rootLabel,""),I=ifUndefined(t.noRoot,!1),o=(ifUndefined(t.multiRoot,!1),ifUndefined(t.deleteBranch,!1)),A=ifUndefined(t.iconOpen,"fa-regular fa-folder-open fa-lg"),C=ifUndefined(t.iconClose,"fa-solid fa-folder-closed fa-lg"),L=ifUndefined(t.iconEmpty,"fa-regular fa-file fa-lg"),W=ifUndefined(t.collapsable,!0),O=ifUndefined(t.collapsedLevel,100),S=ifUndefined(t.selectable,!0),T=ifUndefined(t.dpSearch,!1),U=ifUndefined(t.parentList,""),E=ifUndefined(t.input,!1),i=ifUndefined(t.toggleList,""),e=void 0,D=("boolean"!=typeof T&&(e=T,T=!0),this.$table,!1),_=(this.getID=function(){return g},this.recordSyncLoading=!1,new EventManager),r=(this.on=_.on,new ToggleManager(i)),j=(""!=b?(b=window[b],null==w&&(w=b.isTreeData())):null==w&&(w=!1),u=""!=u?window[u]:void 0,this.$tableSearchInput=void 0,this.toggle=function(t){let e=!0;e=null==t?this.$table.is(":visible"):"boolean"==typeof t?t:callFunction(t);t=_.dispatch("toggle",e);null!=t&&(e=t),this.$table.toggle(e),isNotEmpty(i)&&r.toggle("none"!=this.$table.getCSSValue("display"),this.$table)},this.hide=function(){this.toggle(!1)},this.show=function(){this.toggle(!0)},this.getSearchText=function(){return null==this.$tableSearchInput||0==this.$tableSearchInput.length?"":this.$tableSearchInput.val().trim()},this.setSearchText=function(t){t=t.trim(),this.$tableSearchInput.val(t),this.$tableSearchInput.trigger("keyup")},this.clearSearchText=function(){this.$tableSearchInput.val(""),this.$tableSearchInput.trigger("keyup")},this.toggleSearch=function(t){null==t&&(t=!(t=this.$tableSearchInput.parent().is(":visible"))),this.$tableSearchInput.parent().toggle(t),t||this.setSearchText("")},this.length=function(){return p.find("tr").length},this.size=function(){return p.find("tr").length},this.isTreeData=function(){return w},this.getNoRoot=function(){return I},this.setRootLabel=function(t){k=t,this.refreshRow(0)},this.getDeleteBranch=function(){return o},new Array),B=(w&&j.push(new Column("",{title:"<i class='fa-solid fa-folder-tree'></i>",template:"<span class='{"+g+"_level_icon} silk-tree-icon' style='left:{"+g+"_level_width}px; color: {"+g+"_icon_color}' aria-hidden='true'></span>",width:"20px",align:"left",valign:"middle",wrap:!0})),this.setTreeIcons=function(t,e,i){null!=t&&(A=t),null!=e&&(C=e),null!=i&&(L=i)},this.cleanColumns=function(){j=new Array},this.cleanHeaders=function(){n.html("")},this.addColumn=function(t){""==t.getTableID()&&t.setTableID(g),j.push(t)},this.removeColumn=function(t){j.splice(t,1)},this.getColumns=function(){return j},this.sort=function(t){b.sort(t)},this.buildHeaders=function(){if("none"!=s){this.cleanHeaders();for(var e=0;e<j.length;e++)if(j[e].getVisible()){var i=j[e].getTitle();if(""!=j[e].getSortColumn()&&!w){let t="";b.getSortColumn()==j[e].getSortColumn()&&(t=1==b.getSortDirection()?"<i class='fa-solid fa-caret-up' style='padding-left:4px' ></i>":"<i class='fa-solid fa-caret-down'style='padding-left:4px' ></i> "),i='<a href="javascript:'+g+".sort('"+j[e].getSortColumn()+"');\">"+i+"</a>"+t}var t=document.createElement("th");t.setAttribute("id",j[e].getID()),t.setAttribute("style","text-align:"+j[e].getAlign()+";"),t.innerHTML=i,n.append($(t))}}},new Array),P=(this.addComponent=function(t){B.push(t)},this.getComponents=function(){return B},this.getDataSource=function(){return b},this.load=function(t,e){if(this.operationIndex=e,this.action=null==t?"select":t,_.dispatch("beforeLoad",this.action,this.operationIndex),"select"==this.action){this.buildHeaders(),p.html("");for(var i=0;i<b.size();i++){var n=b.getItemAt(i);if(ifUndefined(_.dispatch("filterLoad",i,n),!0)){if(w){if(n._treeLevel>O)continue;0<n._childrenCount&&n._treeLevel==O?n[g+"_level_status"]=0:0<n._childrenCount&&n._treeLevel<O?n[g+"_level_status"]=1:n[g+"_level_status"]=-1}var s=n[b.selectObject.pkColumn],a=P(s,n,i);p.append(a)}}if(E)return void this.$table.find(".form-control").each(function(t,e){var e=$(e),i=e.attr("data-mask");isNotEmpty(i)&&e.mask(i)});if(_.dispatch("afterLoad",this.action,this.operationIndex),0<this.length())null==m?v&&!E&&(p.find("tr:first-child td").last().trigger("click"),b.doRecordSync)&&(b.execRecordSyncAfterLoadingSelect=!0):!v||window[m].isAlone||E||(p.find("tr:first-child td").last().trigger("click"),b.doRecordSync&&(this.recordSyncLoading=!0,b.execRecordSyncAfterLoadingSelect=!0));else{for(i in B)null!=B[i].clean&&B[i].clean();this.operationIndex=-1}for(i in B)null!=B[i].insertBt&&""!=U&&(0==window[U].length()?B[i].insertBt.hide():B[i].insertBt.show())}else if("insert"==this.action){s=(n=b.selectObject.data[this.operationIndex])[this.getPkColumn()],e="",t=w;if(1==I&&(1==b.size()?(t=!1,n[b.selectObject.levelControlColumn]=0,n._treeLevel=0,n[g+"_level_status"]=0,n._childrenCount=0):t=!0),t){n._childrenCount=0,n[g+"_level_status"]=-1;var o=p.children().length,l=p.find("tr:eq("+this.selectedIndex+")"),r=b.getIndex(l.attr("data-pk")),d=(u=b.selectObject.data[r])[b.selectObject.levelControlColumn],t=(u._childrenCount=u._childrenCount+1,0==u[g+"_level_status"]);if(1!=u[g+"_level_status"]&&(u[g+"_level_status"]=1,this.refreshRow(this.selectedIndex,r),l=p.find("tr:eq("+this.selectedIndex+")")),t){new Array;for(var c,h=(c=H(u)).length-1;0<=h;h--)l.after(c[h]);this.selectedIndex++}else{for(i=this.selectedIndex+1;i<o;i++)if(l=p.find("tr:eq("+i+")"),r=b.getIndex(l.attr("data-pk")),this.selectedIndex=i,b.selectObject.data[r][b.selectObject.levelControlColumn]<=d){this.selectedIndex--;break}e=P(s,n,this.selectedIndex),p.find("tr:eq("+this.selectedIndex+")").after(e)}}else this.selectedIndex=p.children().length,e=P(s,n,this.selectedIndex),p.append(e);this.selectItem(this.operationIndex)}else{var u;"update"==this.action?(this.refreshRow(this.selectedIndex,this.operationIndex),this.selectItem(this.operationIndex)):"delete"==this.action&&(w&&(t=b.operationObject.data[0][b.selectObject.parentTreeColumn],e=b.getIndex(b.operationObject.data[0][b.selectObject.parentTreeColumn]),u=b.selectObject.data[e],t=p.find("tr[data-pk='"+t+"']").index(),F(this.selectedIndex+1,this.selectedLevel),u._childrenCount--,0==u._childrenCount)&&(u[g+"_level_status"]=-1,this.refreshRow(t,e)),u=V,this.selectUp(),u.remove(),null!=window[m])&&(window[m].show(),window[m].mask(!1))}if(0==this.length()&&!E)for(i in B)null!=B[i].setMode&&B[i].setMode(!1);E&&$.applyDataMask(this.$table.find("."+g+"-input")),this.syncHeader(),setTimeout($.proxy(function(){this.syncHeader()},this),400),this.action="select",f.toggle(0==this.length()),T||E||""!=this.getSearchText()&&setTimeout($.proxy(function(){this.filterData()},this),100)},this.errorHandle=function(){_.dispatch("error"),this.action="select"},this.setInputs=function(t){E=null==t?!E:t,this.$tableSearchInput.prop("disabled",E),this.load()},this.getInputs=function(i){var n=new Array;return this.$table.find("tbody tr").each(function(t,e){var e=$(e),r=e.attr("data-index"),d=new Object,c=0;e.find("input,textarea,div").each(function(t,e){var i,n,s,a,o,l,e=$(e);e.hasClass(g+"-input")&&(c++,i=e.attr("data-column"),n=new Object,s=e.attr("data-type"),n.index=r,a=e.attr("data-value"),o="",o="html"==s?e.html():e.val(),e=JSON.parse(e.attr("data-json")),("integer"==s||"number"==s||"decimal"==s||-1<s.indexOf("decimal("))&&(a=getNumber(a,20),o=getNumber(o,20)),l="none",isNotEmpty(o)&&isEmpty(a)&&(l="insert"),isEmpty(o)&&isNotEmpty(a)&&(l="delete"),isNotEmpty(o)&&isNotEmpty(a)&&o!=a&&(l="update"),n.type=s,n.oldValue=a,n.value=o,n.action=l,n.hasChanged=o!=a,n.item=e,d[i]=n)}),0<c&&(null!=i&&i(d),n.push(d))}),n},function(t,e,i){var n=document.createElement("tr"),i=(n.setAttribute("data-pk",t),n.setAttribute("data-index",i),b.getIndex(t));for(y in j)if(j[y].getVisible(e)){var s="",a=(""!=j[y].getAlign()&&(s+="text-align:"+j[y].getAlign()+"; "),""!=j[y].getValign()&&(s+="vertical-align:"+j[y].getValign()+"; "),D&&(s+="border:none;"),w&&(a=15*e._treeLevel,isNaN(a)&&(a=0),0==y&&(e[g+"_level_width"]=a),1==y&&(s+="padding-left: "+a+"px;"),null==e._childrenCount&&(e._childrenCount,e[g+"_level_status"]=-1),0==e._childrenCount?(null==e._iconEmpty?e[g+"_level_icon"]=L:e[g+"_level_icon"]=e._iconEmpty,null!=e._iconEmptyColor&&(e[g+"_icon_color"]=e._iconEmptyColor)):0==e[g+"_level_status"]?(null==e._iconClose?e[g+"_level_icon"]=C:e[g+"_level_icon"]=e._iconClose,null!=e._iconCloseColor&&(e[g+"_icon_color"]=e._iconCloseColor)):(null==e._iconOpen?e[g+"_level_icon"]=A:e[g+"_level_icon"]=e._iconOpen,null!=e._iconOpenColor&&(e[g+"_icon_color"]=e._iconopenColor))),"");if(E&&j[y].hasInput){var o="",r="",d=!0,c=(""!=j[y].getVisibleColumn()&&(d=1==getNumber(e[j[y].getVisibleColumn()])),_.dispatch("renderInput",j[y].getValueColumn(),getNumber(i),e));"boolean"!=typeof(d=null!=c?c:d)&&(-1<(d=""+d).indexOf("|")?(o=d.split("|")[0],r=d.split("|")[1]):o=d,d="true"),d?(""!=j[y].getLabelColumn()?(s+="padding:4px;",a+=e[j[y].getLabelColumn()]+"<br/>"):s+="padding:2px 4px 2px 4px;",c="text,textarea,html,number,integer,decimal(1),decimal(2),decimal(3),decimal(4),decimal(5),decimal(6)",d=j[y].getInputType(),-1==c.indexOf(d.toLowerCase())&&null!=e[d]&&(d=e[d]),""!==o&&(d=o),-1==c.indexOf(d.toLowerCase())&&(d="text"),""!=(o=j[y].getInputMask())&&null!=e[o]&&(o=e[o]),""!==r&&(o=r),a+=j[y].getInput(i,e,d,o,_.dispatch("dataInput",i,e,d))):a="&nbsp;"}else{c=!1;if(""==j[y].getDistinct())c=!0;else if(0==i)c=!0;else if("boolean"==getObjectType(j[y].getDistinct()))c=!0;else{var h="",u="",p=j[y].getDistinct().split(",");for(l in p){var f=p[l].trim();h+=e[f],u+=b.getItemAt(i-1)[f]}h!=u&&(c=!0)}c&&(a=j[y].getData(i,e))}w&&0==i&&!I&&(1==y&&""!=k&&(a=k),1<y)&&(a="&nbsp;");r=document.createElement("td");r.setAttribute("style",s),(j[y].getDraggable()||j[y].getOrdering())&&r.setAttribute("draggable","true"),""!=j[y].getCssClass()&&r.setAttribute("class",j[y].getCssClass()),!1===j[y].getWrap()&&r.setAttribute("nowrap","nowrap"),"full"===j[y].getWrap()&&r.setAttribute("fullwrap","fullwrap"),r.innerHTML=a,n.append(r)}return n}),N=(this.refreshRow=function(t,e){null==t&&(t=this.selectedIndex),null==e&&(e=this.operationIndex);var e=b.selectObject.data[e],i=p.find("tr:eq("+t+")"),e=$(P(e[this.getPkColumn()],e,t));i.replaceWith(e),this.syncHeader()},this.getChildren=function(t){return null==t&&(t=this.getSelectedItem(b.getPkColumn())),b.getChildren(t)},this.getSelectedItem=function(t){return-1==this.operationIndex?new Object:null==t?b.getItemAt(this.operationIndex):b.getItemAt(this.operationIndex,t)},this.setSelectedItem=function(t,e){if(null!=t)return b.setItemAt(this.operationIndex,t,e)},this.getPkColumn=function(){var t=b.selectObject.pkColumn;return t=null==t?"nopk":t},this.getPkValue=function(){return this.getSelectedItem(this.getPkColumn())},this.selectedIndex=-1,this.operationIndex=-1,this.selectedLevel=0,this.selectedChildrenCount=0,null),V=null,a=null,M=-1,R=-1,q="",H=(this.mouseCallback=function(t,e){if(E)e.stopPropagation();else{"click"==t&&null!=V&&V.removeClass("table-active");var i=$(e.currentTarget),n=i.parent(),s={},a="",o=(""!=b&&(a=n.attr("data-pk"),s=b.getIndexItem(a)),-1),l=!1;if(null!=e.originalEvent&&(l=!0,o=i.index()),"dragstart"==t)q=a,j[o].getOrdering()&&(M=n.index(),R=-1),_.dispatch("dragStart",o,n.index(),s,e);else if("dragenter"==t)_.dispatch("dragEnter",o,n.index(),s,e);else if("dragover"==t)_.dispatch("dragOver",o,n.index(),s,e);else if("dragleave"==t)_.dispatch("dragLeave",o,n.index(),s,e);else if("dragdrop"==t){if(j[o].getOrdering()){R=n.index();for(var r=new Array,d=0;d<b.size();d++)M<R?(d!=M&&r.push(b.getItemAt(d,b.getPkColumn())),d==R&&r.push(b.getItemAt(M,b.getPkColumn()))):(d==R&&r.push(b.getItemAt(M,b.getPkColumn())),d!=M&&r.push(b.getItemAt(d,b.getPkColumn())));for(d in"SQL"==b.sourceType&&b.cleanOperations(),r)"SQL"==b.sourceType&&(b.setOperationAction("update"),b.setOperationItem(b.getPkColumn(),r[d]),b.setOperationItem(b.selectObject.orderColumn,d)),b.setItemAt(b.getIndex(r[d]),b.selectObject.orderColumn,d);"SQL"==b.sourceType&&b.batch(),b.sort(b.selectObject.orderColumn,!1)}this.selectRow(b.getIndex(q)),_.dispatch("dragDrop",o,n.index(),s,e)}else{if(N=i,V=n,this.selectedIndex=V.index(),1==b.length()?this.operationIndex=0:this.operationIndex=b.getIndex(V.attr("data-pk")),1==this.length()&&"delete"==this.action)for(d in B)null!=B[d].clean&&B[d].clean();else{if(b.doRecordSync&&!this.recordSyncLoading&&l)this.recordSyncLoading=!0,b.recordSync();else for(d in B)null!=B[d].load&&B[d].load();null!=b.detailDP&&b.select(b.detailDP)}if(w){a=b.selectObject.data[this.operationIndex],t=a[g+"_level_status"];if(this.selectedLevel=a[b.selectObject.levelControlColumn],W&&N.is(":first-child")&&-1!=t){if(0==t){a[g+"_level_status"]=1;new Array;for(var c,h=(c=H(a)).length-1;0<=h;h--)V.after(c[h])}1==t&&(a[g+"_level_status"]=0,F(this.selectedIndex+1,this.selectedLevel)),this.refreshRow(this.selectedIndex,this.operationIndex),this.syncHeader(),V=p.find("tr:eq("+this.selectedIndex+")")}}_.eventExists("visualSelection")?ifUndefined(_.dispatch("visualSelection",o,this.selectedIndex,l,e),!1)&&V.addClass("table-active"):"always"===S?V.addClass("table-active"):null!=window[m]?null!=window[m].isSingle&&S&&!window[m].isSingle&&V.addClass("table-active"):S&&V.addClass("table-active"),_.dispatch("click",o,this.selectedIndex,l,e),l&&(""!=j[o].getTargetPage()?(!w||I||0<this.selectedIndex)&&j[o].showPage():null!=u&&u.show())}}},function(t){var e,i=[],n=t[b.selectObject.rootTreeColumn],s=t[b.selectObject.levelControlColumn];for(e in b.selectObject.data){var a=b.selectObject.data[e],o=a[b.selectObject.parentTreeColumn],l=a[b.selectObject.levelControlColumn];o===n&&l==s+1&&(o=[],0<a._childrenCount?(null==a[g+"_level_status"]&&(a[g+"_level_status"]=0),1==a[g+"_level_status"]&&(o=H(a))):a[g+"_level_status"]=-1,i.push(P(a[b.selectObject.pkColumn],a,e)),i=i.concat(o),b.selectObject.data[e][g+"_level_status"]=a[g+"_level_status"])}return i}),F=function(t,e){var i=p.find("tr:eq("+t+")"),n=b.getIndex(i.attr("data-pk"));if(-1!=n)for(;b.selectObject.data[n][b.selectObject.levelControlColumn]>e&&(i.remove(),0!=(i=p.find("tr:eq("+t+")")).length);)n=b.getIndex(i.attr("data-pk"))},d=(this.selectItem=function(t){0!=b.length()&&null!=t&&(t=b.selectObject.data[t][this.getPkColumn()],p.find("tr[data-pk='"+t+"']").find("td:last-child").trigger("click"),p.find("tr[data-pk='"+t+"']")[0].scrollIntoViewIfNeeded())},this.selectRow=function(t){null==t&&(t=this.selectedIndex),p.find("tr:eq("+t+")").find("td:last-child").trigger("click"),p.find("tr:eq("+t+")")[0].scrollIntoViewIfNeeded()},this.unselectRow=function(){null!=V&&V.removeClass("table-active")},this.selectUp=function(){-1<this.selectedIndex&&this.selectRow(this.selectedIndex-1)},this.selectDown=function(){this.selectedIndex<p.children().length-1&&this.selectRow(this.selectedIndex+1)},this.syncHeader=function(){var t=p.find("tr:visible:first td"),e=n.find("th");for(x=0;x<t.length;x++)"0"==j[x].getWidth()?$(t[x]).css("width",""):$(t[x]).css("width",j[x].getWidth()),$(e[x]).css("width","");"none"==s||"fixed"!=s&&"top-fixed"!=s||(0<$("#personListTopHeader").length?this.$table.find(".silk-table-header").css("top",$("#"+g+"TopHeader").height()):this.$table.find(".silk-table-header").css("top",0))},this.callAction=function(t){b.callAction(t,this.operationIndex)},this.searchTimer,this.filterData=function(t){var i=t;null==t&&(i=this.getSearchText()),_.eventExists("searchText")&&(i=_.dispatch("searchText",i)),T?(e?window[e]:b).select():""==i?p.find("tr").show():(i=i.toLowerCase(),p.find("tr").each(function(t,e){d($(e),i)})),this.syncHeader()},function(t,e){for(var i=t.text().toLowerCase(),n=e.split(" "),s=0,a=0,o=0;o<n.length;o++)""!=n[o]&&(s++,-1!=i.indexOf(n[o]))&&a++;t.toggle(s==a)});this.initTable=function(){for(y in this.$table=$("#"+g),n=this.$table.find(".silk-table-header"),p=this.$table.find(".silk-table-data tbody"),f=$("#"+g+"Empty"),m=this.$table.closest(".silk-page").attr("id"),a=this.$table.closest(".silk-content"),D=this.$table.find("table").hasClass("no-border"),this.$tableSearchInput=$("#"+g+"_search_input"),this.$table.parent().hasClass("modal-body")&&(this.$table.parent().removeClass("modal-margin"),this.$table.parent().addClass("modal-no-margin"),this.$table.find("table").css("margin","0px")),0==a.length&&(a=$("body")),null==m||"fixed"!=s&&"none"!=s&&"top-fixed"!=s||0==$("#"+g+"TopHeader").length&&(a.children().first().hasClass("silk-table")||a.children().first().hasClass("silk-help"))&&(a.addClass("silk-table-first-on-page"),n.addClass("silk-table-first-on-page-header")),p.on("click","td",$.proxy(function(t){E||(""!=window.getSelection().toString()?(t.preventDefault(),_.dispatch("textSelection",window.getSelection().toString())):this.mouseCallback("click",t))},this)),p.on("dragstart","td",$.proxy(function(t){var e;this.mouseCallback("dragstart",t),j[t.currentTarget.cellIndex].getOrdering()&&((e=document.createElement("img")).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACEUlEQVRYCe1XTUsCURSdZ4O4UdciLYKwFkKRVJvEEjeFtlCLfkX0E/oJ0a8IUxcVtQlTDMSCMHBRErUQmbW6kZBec4w3TDajXsFp48D47jv345y5zkMvS6VSM3Ozs1ucsSXOuVOy4GKMtRnnzx/1+h17LJUiX5K0MQ5vLp9fRF54c/NlnHybJN3LeHKJc3J+u922FwqFbSSuBgLvTqfzk1oE3LZx255Kp8OdTseFGzaVHPHgVrtAv6rVqqdWq62JTNjAxJ6ykgWoqtnF1VVMJWE6oh4Gnw4bySQLyGaz681m88/TAoNvJFZdEElAo9FwPVUqW7r8XyZ8iPkFDtmQBJxnMjvdbtduVhM+xJj5jXBWLpWOjRxWYaQOTEKULIoWi8X521wuhnMtsEmsDoejFQmHL4PB4Bvqax2wghyEeEBwwcalCfjZWv+pCUBb0J5JSxBfgeCZnoLpKdBeQvFSWL1qAqanwOrWCz7tFAhg0HpyenqgKMrCoBiPx/N6dHh4NihG79PeAT1oZu8lEteyLJv++4UPMWb5RjhJgNfrba0sL98ZFQIGH2LM/EY4SQAKxOPxstvtVvqLAYOvHx+2JwtQxyq+G41eqoX100wPg28YYb+fLAAF/H6/4vP5HkQx2MDEnrLaMChSEkTsfjKZw08rbtgCp6zgljGlqn0jD6eYBUOh0A0Ix5kLkQdu9t/j+Tcv4O5d+y8EhwAAAABJRU5ErkJggg==",t.originalEvent.dataTransfer.setDragImage(e,15,15))},this)),p.on("dragenter","td",$.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.mouseCallback("dragenter",t)},this)),p.on("dragover","td",$.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.mouseCallback("dragover",t)},this)),p.on("dragleave","td",$.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.mouseCallback("dragleave",t)},this)),p.on("drop","td",$.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.mouseCallback("dragdrop",t)},this)),j)j[y].initColumn();this.buildHeaders(),0<this.$tableSearchInput.length&&(this.$tableSearchInput.keyup($.proxy(function(){clearTimeout(this.searchTimer),this.searchTimer=setTimeout($.proxy(function(){this.filterData()},this),600)},this)),$("#"+g+"_search_clean").click($.proxy(function(){this.$tableSearchInput.val(""),this.filterData()},this))),this.$tableSearchInput.prop("disabled",E)}},TabsNav=function(t){this.$tabs=void 0,this.$active=void 0,this.pageList=new Array,this.activePage="",this.scrollLeft=0,this.addPage=function(t,e){var i=new Object,n=(i.pageName=t,i.pageTitle=e,i.active=0,-1);for(x in this.pageList)if(this.pageList[x].pageName==t){n=x;break}-1==n?this.pageList.push(i):this.pageList[n].pageTitle=e},this.setActive=function(i){null!=i&&(this.$tabs.find(".nav-link").each($.proxy(function(t,e){this.pageList[t].pageName==i?(this.pageList[t].active=1,$(e).addClass("active"),$(e).find(".silk-head-help").show(),this.activePage=i):(this.pageList[t].active=0,$(e).removeClass("active"),$(e).find(".silk-head-help").hide())},this)),this.$active=this.$tabs.find(".active"),this.$tabs.scrollLeft(this.scrollLeft),this.relocateTab(),this.setBarWidth())},this.toggleTab=function(t,e){if(null!=t){var n=-1;for(i=0;i<this.pageList.length;i++)if(this.pageList[i].pageName==t){n=i;break}-1!=n&&(e?$(this.$tabs.find("li")[n]).show():($(this.$tabs.find("li")[n]).hide(),this.activePage==t&&(0<n?(this.setActive(this.pageList[n-1].pageName),this.show()):n<this.pageList.length-1&&(this.setActive(this.pageList[n+1].pageName),this.show()))),this.relocateTab())}},this.hideTab=function(t){this.toggleTab(t,!1)},this.showTab=function(t){this.toggleTab(t,!0)},this.relocateTab=function(){var t,e;null!=this.$active&&(e=(t=this.$active.parent().position().left-30)+this.$active.parent().width()+60,t<0?(this.$tabs.scrollLeft(this.$tabs.scrollLeft()+t),this.scrollLeft=this.$tabs.scrollLeft()):e>this.$tabs.width()&&(this.$tabs.scrollLeft(this.$tabs.scrollLeft()+(e-this.$tabs.width())),this.scrollLeft=this.$tabs.scrollLeft()))},this.render=function(){var t=this.$tabs.children().first();for(x in t.text(""),this.pageList){var e=document.createElement("li"),i=(e.setAttribute("class","nav-item"),document.createElement("a"));i.setAttribute("class","nav-link"),i.setAttribute("href","#"),i.setAttribute("data-index",x),i.innerHTML=this.pageList[x].pageTitle,e.append(i),t.append(e)}this.setActive(this.activePage)},this.show=function(){window[this.activePage].show()},this.exists=function(t){var e=!1;for(x in this.pageList)if(this.pageList[x].pageName==t){e=!0;break}return e},this.setBarWidth=function(){var t,e,i,n;page=this.activePage,null!=window[page]&&(this.$tabs.height(42),t=window[page].headerWidth,e=window[page].$page.find(".silk-navbar").width(),i=(n=$("#"+window[page].id+"_backBt")).parent().width(),n=n.parent().parent().find(".silk-navbar-right").width(),this.$tabs.css("margin-left",i),this.$tabs.width(e-t-i-n-10))},this.initTabsNav=function(){this.$tabs=$("#"+t),0==this.pageList.length?this.$tabs.hide():(this.activePage=this.pageList[0].pageName,this.render(),window[this.activePage].$page.find(".silk-navbar").append(this.$tabs),this.$tabs.children().first().on("click",$.proxy(function(t){t.preventDefault();var t=$(t.target),e=t.data("index");null==e&&null==(e=t.parent().data("index"))||(this.scrollLeft=this.$tabs.scrollLeft(),window[this.pageList[e].pageName].show(),this.setBarWidth(),setTimeout(function(){silk.layoutScreens()},100))},this)),setTimeout($.proxy(function(){this.setBarWidth()},this),300))}},Tile=function(e,t){var l=ifUndefined(t.dataSource,void 0),a=ifUndefined(t.columns,""),o=ifUndefined(t.rowClass,""),n=ifUndefined(t.content,""),i=ifUndefined(t.rendererFn,""),r=(this.className="tile",this.$tile,this.getID=function(){return e},new EventManager),d=(this.on=r.on,this.renderer=null,""!=l&&(l=window[l]),this.getDataSource=function(){return l},this.load=function(){if(r.dispatch("beforeLoad",this.action,this.operationIndex),this.$tile.html(""),null!=l){var t=0,e=0,i="";if("dataProvider"==l.className){for(var n=0;n<l.length();n++){var s=l.getItemAt(n);ifUndefined(r.dispatch("filterLoad",n,s),!0)&&(0==e&&0<a&&(i+="<div class='"+o+" silk-tile-row' data-index='"+t+"' >"),e++,i+=d(n,s),e==a)&&0<a&&(i+="</div>",e=0,t++)}e!=a&&0<a&&(i+="</div>")}"table"==l.className&&(s=l.getSelectedItem(),ifUndefined(r.dispatch("filterLoad",0,s),!0))&&(i=d(0,s)),this.$tile.html(i),r.dispatch("afterLoad",this.action,this.operationIndex)}},this.mouseCallback=function(t,e){var i,n,s,a,o=$(e.target).closest(".silk-tile-cell");0!=o.length&&(i=o.attr("cellIndex"),n=o.attr("pkValue"),s=-1,a={},s=l.getIndex(n),a=l.getItemAt(s),l.setSelectedIndex(s),"click"==t)&&r.dispatch("click",a,o,s,i,e)},function(t,e){var i=getTemplateData(n,t,e,this.renderer);return i=null!=l?(i=i.replace("__value__",e[l.getPkColumn()])).replace("__index__",t):i});this.appendCell=function(t){$("#"+t).addClass("silk-tile-cell"),$("#"+t).attr("cellIndex",this.$tile.children().length),this.$tile.append($("#"+t))},this.prependCell=function(t){$("#"+t).addClass("silk-tile-cell"),$("#"+t).attr("cellIndex",0),this.$tile.children().each($.proxy(function(t){var t=$(this.$tile.children()[t]),e=getNumber(t.attr("cellindex"));t.attr("cellindex",e+1)},this)),this.$tile.prepend($("#"+t))},this.initTile=function(){this.$tile=$("#"+e);var t=$("<div></div>");try{$(n)}catch(t){n="<div>"+n+"</div>"}1<$(n).length&&(n="<div>"+n+"</div>"),t.append($(n)),t.children().first().attr("pkValue","__value__"),t.children().first().attr("cellIndex","__index__"),t.children().first().addClass("silk-tile-cell"),n=t.html(),""!=i&&(this.renderer=window[i]),this.$tile.on("click",$.proxy(function(t){t.stopPropagation(),""!=window.getSelection().toString()?(t.preventDefault(),r.dispatch("textSelection",window.getSelection().toString())):this.mouseCallback("click",t)},this))}},ToggleManager=function(a,o){o=ifUndefined(o,"");var l=a.trim().split(",");this.toggle=function(t,e){if(""!=a.trim())for(var i in l){var i=l[i].trim(),n=t;if(i.startsWith("!")&&(n=!t,i=i.replace("!","")),"all"==i)developerForm.$form.parent().children().each(function(t,e){var e=$(e),i=ifUndefined(e.attr("id"),"");i!=o&&(""==o||null==window[i]||null==window[i].toggle?e:window[i]).toggle(n)});else if("group"==i){if(null==e)return;e.closest(".silk-group").toggle(n)}else if("parent"==i){if(null==e)return;e.parent().toggle(n)}else if("grandpa"==i){if(null==e)return;e.parent().parent().toggle(n)}else if(i.startsWith("#"))$(i).toggle(n);else if(i.startsWith("."))$(i).toggle(n);else if(0<i.indexOf(".")){var s=i.split(".");try{window[s[0]][s[1]].toggle(n)}catch(t){}}else try{window[i].toggle(n)}catch(t){}}}};